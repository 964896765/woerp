{"version":3,"sources":["webpack:///C:/Users/chejun/Desktop/woerp/pages/material/material-page.vue?6287","webpack:///C:/Users/chejun/Desktop/woerp/pages/material/material-page.vue?f19d","webpack:///C:/Users/chejun/Desktop/woerp/pages/material/material-page.vue?41d5","webpack:///C:/Users/chejun/Desktop/woerp/pages/material/material-page.vue?643c","uni-app:///pages/material/material-page.vue","webpack:///C:/Users/chejun/Desktop/woerp/pages/material/material-page.vue?cd05","webpack:///C:/Users/chejun/Desktop/woerp/pages/material/material-page.vue?9a07"],"names":["name","components","OutboundTypePicker","props","nid","type","default","data","_userInteracted","containerHeightPx","containerTopPx","containerFixed","rightListHeightPx","headHidePx","_headHideMaxPx","_prevScrollTop","_containerTopBasePx","_dragWatch","_lastMoveTs","drawerOpen","drawerDragging","drawerWidthPx","drawerRightPx","swipe","tracking","startX","startY","lastX","axisSwipe","consumed","selectedCategory","selectedCategories","selectedMaterials","isDragging","isInDeleteZone","dragScrollLock","dragTarget","dragItem","dragIndex","dragX","dragY","deleteZoneRect","_lastHit","_lpTimer","_pressed","_longpressArmed","_startCandidate","zoneSide","zoneVisible","zoneStyle","_winH","_safeTop","_safeBottom","tabCategories","id","groups","scope","title","materials","code","quantity","batch","spec","department","cartList","qtyDialog","opType","qtyStr","opMat","showBatchIssueDialog","selectedDepartment","selectedBom","batchQuantity","issuePreview","cartOpen","materialCode","materialName","fromWarehouse","toDepartment","date","requiredQuantity","outboundRecords","bomRequirements","totalOutbound","totalRequired","finalQuantity","watch","clearInterval","immediate","handler","beforeDestroy","computed","categories","flatMaterials","material","originalQuantity","cartCount","cartAgg","total","map","availableBoms","canConfirmIssue","availableBatches","used","canConfirmOutbound","smartButtonConfig","text","action","icon","ghostStyle","created","mounted","uni","success","wx","onHide","console","onUnload","_updateFloatingOffsets","safeBottom","_updateModalShift","_applyTopOffset","_handleHeadHideProgress","_calcContainerAndListHeights","windowTop","winH","q","select","exec","contTop","contH","titleH","rightPadV","listH","_calcRightListHeight","onGlobalTouchMove","e","onGlobalTouchEnd","onGlobalTouchCancel","getListSafe","getIdSafe","ensureUserGestureFlag","vibrateNow","onEdgeTouchStart","y","screenWidth","onEdgeTouchMove","onEdgeTouchEnd","cancelDrawerDrag","_axisStart","_axisMove","_axisEnd","openDrawer","closeDrawer","onLeftScroll","selectCategory","calculateWorkshopQuantity","filter","reduce","getMaterialCalculationDetails","showCalculationDetail","closeCalculationModal","getDepartmentName","getDepartmentNameByCode","showBatchOutboundModal","closeBatchOutboundModal","selectOutboundDepartment","selectBatch","generateOutboundPreview","workshopQuantity","outboundQuantity","getWorkshopQuantity","confirmBatchOutbound","delta","timestamp","meta","batchNumber","departmentName","operationType","uiUtils","resetDragState","deleteDraggedCategory","content","list","deleteDraggedMaterial","group","deleteSelectedCategories","selectedList","tabCats","deleteSelectedMaterials","openQty","closeQty","confirmQty","outboundType","openCart","closeCart","removeCartItem","clearCart","checkout","url","editMaterial","deleteMaterial","deleted","loadCartList","saveCartList","handleAddMaterial","showAddCategoryDialog","showAddMaterialDialog","closeAddCategoryModal","confirmAddCategory","closeAddMaterialModal","resetNewMaterial","confirmAddMaterial","ensureGroup","ensureGroupsForTab","cats","handleSmartAction","handleBomUpload","count","extension","fail","uploadBomFile","filePath","formData","source","category","uploadResult","refreshCurrentCategory","handleBatchDownload","setTimeout","showCancel","prepareDownloadData","flatMap","showBatchIssueModal","closeBatchIssueModal","selectDepartment","selectBom","findGroupByTabAndTitle","findMainWarehouseMaterialByCode","generateIssuePreview","availableQuantity","confirmBatchIssueToCart","bomId","bomName","doSearch","goRecords","onDragStart","beginDragCategory","__dragType","beginDragMaterial","beginDrag","payload","onDragMove","onDragEnd","onDragCancel","_resetDrag","_measureDeleteZone","q2","_hitTestDeleteZone","_firstTouch","clientX","clientY","removeMaterialById","g","prepareDeleteZone","teardownDeleteZone","onRightScroll"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsI;AACtI;AACiE;AACL;AACqC;;;AAGjG;AACoL;AACpL,gBAAgB,6LAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,oGAAM;AACR,EAAE,6GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,kOAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9FA;AAAA;AAAA;AAAA;AAAkrB,CAAgB,usBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;AC0ftsB;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAGAA;EACAC;IAAAC;EAAA;EACAC;IAAAC;MAAAC;MAAAC;IAAA;EAAA;EACAC;IAAA;IACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MAEA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEA;MACAC;MACAC;MAEA;MACAC;MACAC;MACAC;MACAC;MACAC;QAAAC;QAAAC;QAAAC;QAAAC;MAAA;MAEA;MACAC;QAAAJ;QAAAC;QAAAC;QAAAC;QAAAE;MAAA;MAEA;MACAC;MACAC;MACAC;MAEA;MACAC;MACAC;MACAC;MACAC;MAAA;;MAEA;MACAC;MACAC;MACA;MACAC;MACAC;MACA;MACAC;MACAC;MAEA;MACAC;MACAC;MACAC;MACAC;MAEA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MACAC;MACAC;MAEA;MACAC;QACA,IACA;UAAAC;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA,GACA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA,GACA;UAAAsD;UAAAtD;QAAA,EACA;QACA,IACA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA,GACA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA,GACA;UAAAsD;UAAAtD;QAAA,EACA;QACA,IACA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA,GACA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA,GACA;UAAAsD;UAAAtD;QAAA,EACA;QACA,IACA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA,GACA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA,EACA;QACA,IACA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA,GACA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA,EACA;QACA,IACA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA,GACA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA;UAAAsD;UAAAtD;QAAA;MAEA;MAEA;MACAuD;MACA;MACA;QAAAC;QAAAC;QAAAC,YACA;UAAAJ;UAAAK;UAAA3D;UAAA4D;UAAAC;UAAAC;QAAA;MACA,GACA;QAAAN;QAAAC;QAAAC,YACA;UAAAJ;UAAAK;UAAA3D;UAAA4D;UAAAC;UAAAC;QAAA;MACA,GACA;QAAAN;QAAAC;QAAAC,YACA;UAAAJ;UAAAK;UAAA3D;UAAA4D;UAAAC;UAAAC;QAAA;MACA,GACA;QAAAN;QAAAC;QAAAC,YACA;UAAAJ;UAAAK;UAAA3D;UAAA4D;UAAAC;UAAAC;QAAA;MACA,GACA;QAAAN;QAAAC;QAAAC,YACA;UAAAJ;UAAAK;UAAA3D;UAAA4D;UAAAC;UAAAC;QAAA;MACA;MAEA;MACA;QAAAN;QAAAC;QAAAC,YACA;UAAAJ;UAAAK;UAAA3D;UAAA4D;UAAAC;UAAAC;QAAA;MACA,GACA;QAAAN;QAAAC;QAAAC,YACA;UAAAJ;UAAAK;UAAA3D;UAAA4D;UAAAC;UAAAC;QAAA;MACA,GACA;QAAAN;QAAAC;QAAAC,YACA;UAAAJ;UAAAK;UAAA3D;UAAA4D;UAAAC;UAAAC;QAAA;MACA,GACA;QAAAN;QAAAC;QAAAC,YACA;UAAAJ;UAAAK;UAAA3D;UAAA4D;UAAAC;UAAAC;QAAA;MACA,GACA;QAAAN;QAAAC;QAAAC,YACA;UAAAJ;UAAAK;UAAA3D;UAAA4D;UAAAC;UAAAC;QAAA;MACA;MAEA;MACA;QAAAN;QAAAC;QAAAC,YACA;UAAAJ;UAAAK;UAAA3D;UAAA4D;UAAAG;UAAAD;QAAA,GACA;UAAAR;UAAAK;UAAA3D;UAAA4D;UAAAG;UAAAD;QAAA;MACA,GACA;QAAAN;QAAAC;QAAAC,YACA;UAAAJ;UAAAK;UAAA3D;UAAA4D;UAAAG;UAAAD;QAAA,GACA;UAAAR;UAAAK;UAAA3D;UAAA4D;UAAAG;UAAAD;QAAA;MACA,GACA;QAAAN;QAAAC;QAAAC,YACA;UAAAJ;UAAAK;UAAA3D;UAAA4D;UAAAG;UAAAD;QAAA,GACA;UAAAR;UAAAK;UAAA3D;UAAA4D;UAAAG;UAAAD;QAAA;MACA,EACA;MAEA;MACAE;MACAC;MACAC;MACAC;MACAC;MAEA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IAAA,sDAEA,uDACA,wDACA,wDAEA,gEAGA,oEACA,+DACA,wDACA;MAAAf;MAAA3D;MAAA4D;MAAAC;MAAAC;IAAA,iEAGA,CACA;MAAAR;MAAAtD;MAAA2D;IAAA,GACA;MAAAL;MAAAtD;MAAA2D;IAAA,GACA;MAAAL;MAAAtD;MAAA2D;IAAA,GACA;MAAAL;MAAAtD;MAAA2D;IAAA,GACA;MAAAL;MAAAtD;MAAA2D;IAAA,GACA;MAAAL;MAAAtD;MAAA2D;IAAA,EACA,0DACA,CACA;MAAAL;MAAAqB;MAAAC;MAAAC;MAAAC;MAAAlB;MAAAmB;IAAA,GACA;MAAAzB;MAAAqB;MAAAC;MAAAC;MAAAC;MAAAlB;MAAAmB;IAAA,GACA;MAAAzB;MAAAqB;MAAAC;MAAAC;MAAAC;MAAAlB;MAAAmB;IAAA,EACA,0DACA,CACA;MAAAJ;MAAAC;MAAAI;MAAAjB;IAAA,GACA;MAAAY;MAAAC;MAAAI;MAAAjB;IAAA,GACA;MAAAY;MAAAC;MAAAI;MAAAjB;IAAA,EACA,+DAGA,uEACA,iEACA;MAAAkB;MAAAC;MAAAC;MAAAC;MAAAC;IAAA,mEAGA,6DACA,yEACA,8DACA,wDACA,yDACA,oDAEA,CACA;MACA/B;MAAAtD;MAAA8D;MAAAC;MACAL,YACA;QAAAiB;QAAAC;QAAAI;MAAA,GACA;QAAAL;QAAAC;QAAAI;MAAA;IAEA,GACA;MACA1B;MAAAtD;MAAA8D;MAAAC;MACAL,YACA;QAAAiB;QAAAC;QAAAI;MAAA,GACA;QAAAL;QAAAC;QAAAI;MAAA;IAEA,GACA;MACA1B;MAAAtD;MAAA8D;MAAAC;MACAL,YACA;QAAAiB;QAAAC;QAAAI;MAAA,GACA;QAAAL;QAAAC;QAAAI;MAAA;IAEA,EACA;EAEA;EAEAM;IACArD;MAAA;MACA;QACA;QACAsD;QACA;UACA;UACA;YACA;YACA;YACAA;UACA;QACA;MACA;QACAA;QACA;MACA;IACA;IACAnF;MACAoF;MACAC;QAAA;QACA;QACA;QACA;QACA;QACA;UAAA;QAAA;MACA;IACA;IACAjB;MACA;IACA;EACA;EAEAkB;IACAH;EAIA;EAEAI;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;QACA;QACA;UAAA,uCACAC;YACAlC;YACAmC;UAAA;QAAA,CACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MAAA,2CACA;QAAA;MAAA;QAAA;UAAA;UACA;UACA;YAAAtC;YAAA3D;YAAAkG;UAAA;UACAC;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MACA;IACA;IACAC;MAAA;MACA;MACA;QAAA;MAAA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA,eACA;QAAAhD;QAAAtD;QAAAuG;MAAA,GACA;QAAAjD;QAAAtD;QAAAuG;MAAA,GACA;QAAAjD;QAAAtD;QAAAuG;MAAA,EACA;MACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MACA;QAAAC;QAAAC;QAAAC;MAAA;MACA;MACA;MACA;MACA;QAAA;MAAA;QACA;UAAAF;UAAAC;UAAAC;QAAA;MACA;MACA;MACA;QAAAF;QAAAC;QAAAC;MAAA;IACA;IACA;IACAC;MACA;IACA;EACA;EAEAC;IACA;IACA;IACA;IACA;IACA;EACA;EAEAC;IAAA;IACA;IACA;;IAEA;;IASA;;IAEA;;IAGA;IACAC;MACAC;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;UAAA;QAAA;MACA;IACA;;IAEA;;IAEAC;MAAA;QAAA;MAAA;IAAA;EAOA;EAEA;EACAC;IACA;MACAC;MACA;IACA;EACA;EACA;EACAC;IACA;MACAD;MACA;IACA;EACA;AAAA,kGAGA;EACA7B;AAIA,qFAGA;EACA;EACA;IACA6B;IACA;EACA;AACA,oEAEA;EACA;EACAE;IACA;MACA;MACA;MACA;QACAC;MACA;QACA;QACAA;MACA;QACAA;MACA;;MAEA;MACA;MACA;MACA;MACA;IACA;MACA;MACA;MACA;IACA;EACA;EAEA;EACAC;IACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;MACA;IACA;EACA;EACA;EACAC;IACA;IACA;IACA;IACA;EACA;EAEA;EACAC;IACA;IACA;IACA;;IAEA;IACA;MACA;MACA;IACA;IAEA;MACA;MACA;IACA;MACA;MACA;MACA;IACA;;IAEA;IACA;;IAEA;IACA;IACA;IAEA;IACA;EACA;EACA;EACAC;IAAA;IACA;IACA;MAAAC;IACA;MACA;MACA;QACAC;QACAD;MACA;IACA;IACA;MACA;QACAC;MACA;IACA;IAEA;IACAC,4CACAC,6CACAC;MAAA;MACA;MACA;;MAEA;MACA;MACA;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MAEAZ;QACAS;QACAD;QACA/G;QACAH;QACAD;QACAwH;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EAEA;EACAC;IACA;EACA;EAEA,kCACAC;IACA;IACA;MACAC;MAAAA;MACA;MAAA;IACA;IACA;IACA;IACA;MAAAA;MAAAA;IAAA;EACA;EACAC;IACA;MACAD;MAAAA;MACA;MAAA;IACA;IACA;IACA;MAAAA;MAAAA;IAAA;IACA;EACA;EACAE;IACA;MACAF;MAAAA;MACA;MAAA;IACA;IACA;IACA;MAAAA;MAAAA;IAAA;IACA;EACA;EAEA;EACA;EACAG;IAAA;EAAA;EACA;EACAC;IAAA;EAAA;EAEA;EACAC;IAAA;EAAA;EAEA;EACAC;IAAA;IACA,KAMA;EACA;EAEA,oCACAC;IAAA;IACA;IACA;IAAA;IACA;MAAAC;IACA;IACA;MAAAC;IAAA;IACA;MACAjC;QACAC;UACAgC;UACA;YACA;cAAAzH;cAAAC;cAAAC;cAAAC;YAAA;YACA;UACA;QACA;MACA;MACA;IACA;IACA;IACA;MACA;QAAAH;QAAAC;QAAAC;QAAAC;MAAA;MACA;IACA;EACA;EACAuH;IACA;IACA;IACA;IACA;MAAA;IAAA;IACA;IACA;;IAEA;IAAA;IACA;MAAAF;IACA;IACA;MAAA;MAAA;IAAA;IAEA;IACA;MACA;MACA;MACA;MACA;IACA;MACA;MACA;MACA;MACA;IACA;IACA;IACA;EACA;EACAG;IACA;IACA;IACA;IACA;IACA;IACA;MACA,2CACA;IACA;MACA,4CACA;IACA;IACA;EACA;EACAC;IACA;IAAA;IACA;IAAA;EACA;EAEA,uCACAC;IACA;IACA;IACA;IACA;IACA;MAAAJ;IAAA;MAAAA;IAAA;IACA;;IAEA;MACAzH;MAAAC;MAAAC;MACAC;MAAAE;IACA;EACA;EACAyH;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;MACA;MACA;MACA;MACA;MACA;IACA;;IACA;EACA;EACAC;IACA;IACA;IACA;EACA,EAJA;EAMAC;IAAA;IAAA;EAAA;EACAC;IAAA;IAAA;EAAA;EAEA,6BACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;MACA;MACA;MACA;MACA;IACA;EACA;EAEA,6CACAC;IAAA;IACA,gDACAC;MAAA;QAAA;MAAA;IAAA,GACAC;MAAA;IAAA;IACA,uCACAD;MAAA;IAAA,GACAC;MAAA;IAAA;IACA;EACA;EACAC;IAAA;IACA,2CACAF;MAAA;QAAA;MAAA;IAAA;IACA;MAAA;IAAA;IACA;MAAA;IAAA;IACA;MAAA;IAAA;IACA;MAAA5E;MAAAC;MAAAC;MAAAC;MAAAC;IAAA;EACA;EACA2E;IACA;IACA;IACA;EACA;EACAC;IACA;IACA;IACA;MAAAhF;MAAAC;MAAAC;MAAAC;MAAAC;IAAA;EACA;EACA6E;IACA;MAAA;IAAA;IAAA;EACA;EACAC;IACA;MAAA;IAAA;IAAA;EACA;EAEA,8BACAC;IAAA;EAAA;EACAC;IACA;IACA;IACA;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACA;IACA;IACA;EACA;EACAC;IAAA;IACA;IACA;IACA;MAAA;IAAA;IACA;IACA;IACA;MAAA;IAAA;IACA;MACA;MACA;MACA;QACA7F;QACAC;QACA6F;QACAC;MACA;IACA;EACA;EACAC;IAAA;EAAA;EACAC;IAAA;IACA;IACA;IACA;MACA;QACAtH;QACAK;QACA3D;QACA6K;QACAxK;QACAuD;QACAkH;QACAC;UACAC;UACAjH;UACAkH;UACAC;QACA;MACA;IACA;IACA;IACA;IACA;IACAC;IACA;IACA;EACA;EAEA;EACAC;IACAhE;IACA;IACA;IACA;IACA;EACA;EAEA;EACAiE;IAAA;IACA;IACArE;MACAvD;MACA6H;MACArE;QACA;QACA;QACA;QACA;QAEA;QACA;;QAEA;QACA;QACA;UAAA;QAAA;QACA;UACAsE;UACA;UACA;UACA;YAAA;UAAA;UACA;YAAA;UAAA;UACA;UACA;YACA;UACA;UACAJ;QACA;MACA;IACA;EACA;EAEA;EACAK;IAAA;IACA;IACAxE;MACAvD;MACA6H;MACArE;QACA;QACA;;QAEA;QACA;QACA;QAEA;QACA;;QAEA;QACA;QACA;UAAA;QAAA;QACA;QACA;QACA;UAAA;QAAA;QACA;UACAwE;UACAN;QACA;MACA;IACA;EACA;EAEA;EACAO;IAAA;IACA;IACA;IAEA1E;MACAvD;MACA6H;MACArE;QACA;QACA;QACA;QACA0E;UACA;UACA;YAAA;UAAA;UACA;UACA;UACA;YAAA;UAAA;UACA;YAAA;UAAA;UACA;UACA;UACA;YAAA;UAAA;UACA;YAAAC;UAAA;QACA;QACA;QACA;QACA;QACA;QACAT;MACA;IACA;EACA;EAEAU;IAAA;IACA;IACA;IAEA7E;MACAvD;MACA6H;MACArE;QACA;QACA;QACA0E;UACA;UACApI;YACA;YACA;YACA;cAAA;YAAA;YACA;cAAAkI;YAAA;UACA;QACA;QACA;QACAN;MACA;IACA;EACA;EAEA,qCACAW;IAAA;IAAA;IAAA;IAAA;EAAA;EACAC;IAAA;IAAA;EAAA;EACAC;IACA;IACA;IACA;IACA;MACA1I;MACAK;MACA3D;MACA6K;MACAxK;MACAuD;MACAkH;MACAC;QAAAkB;MAAA;IACA;IACA;IAAA;IAAA;IACAd;EACA;EAEAe;IAAA;IAAA;EAAA;EACAC;IAAA;EAAA;EACAC;IAAA;MAAA;IAAA;IAAA;IAAA;EAAA;EACAC;IAAA;IAAA;IAAA;EAAA;EACAC;IACA;IACA;IACA;MAAA;QACAhJ;QAAAqB;QAAAC;QACAvE;QAAAuD;QAAAkH;QAAAC;MACA;IAAA;IACA/D;IACA;IACAA;MAAAuF;IAAA;EACA;EAEAC;IAAArB;EAAA;EACAsB;IAAA;IACA;MAAAtB;MAAA;IAAA;IACA;IAAA;IACAnE;MACAvD;MACA6H;MACArE;QACA;QACA;QACA;QAAA,4CACA1D;UAAA;QAAA;UAAA;YAAA;YACA;YACA;YACA;cAAA;YAAA;YACA;cACAkI;cACAN;cACAuB;cACA;YACA;UACA;QAAA;UAAA;QAAA;UAAA;QAAA;QACA;MACA;IACA;EACA;EAEAC;IAAA;EAAA;EACAC;IAAA5F;EAAA;EAEA,+BACA6F;IAAA;IAAA;EAAA;EACAC;IAAA;IAAA;IAAA;EAAA;EACAC;IAAA;IAAA;IAAA;EAAA;EACAC;IAAA;IAAA;EAAA;EACAC;IACA;IACA;IACA;IACA;MAAA;IAAA;IACA;MAAA3J;MAAAtD;IAAA;IACA;IACA;MAAAwD;MAAAC;MAAAC;IAAA;IACAyH;IACA;IACA;EACA;EACA+B;IAAA;IAAA;EAAA;EACAC;IAAA;MAAAxJ;MAAA3D;MAAA4D;MAAAC;MAAAC;IAAA;EAAA;EACAsJ;IAAA;IACA;IACA;MAAA;QAAA;MAAA;IAAA;IACA;;IAEA;IACA;IACA;IACA;MACA;QAAA;MAAA;MACA;QAAA;MAAA;MACA3B;QACAnI;QACAK;QACA3D;QACA4D;QACAC;QACAC;MACA;MACAqH;MACA;IACA;EACA;EAEA;EACAkC;IACA;IACA;IACA;MAAA;IAAA;IACA;MACA;QAAA7J;QAAAC;QAAAC;MAAA;IACA;EACA;EACA;EACA4J;IAAA;IACA;IACAC;MACA;IACA;EACA;EAEA,8BACAC;IACA;IACA,4DACA;EACA;EAEA;EACAC;IAAA;IACA;;IAqBAzG;MACA0G;MAAArN;MAAAsN;MACA1G;QACA;QACA;UAAA;QAAA;MACA;MACA2G;QAAAzC;MAAA;IACA;EAEA;EAEA;EACA0C;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACA7G;gBAAAvD;cAAA;cAAA;cAAA;cAAA,OAcA;gBACAuD;kBACAuF;kBAAA;kBACAuB;kBACA9N;kBACA+N;oBAAAC;oBAAAC;kBAAA;kBACAhH;kBAAA2G;gBACA;cACA;YAAA;cARAM;cAWAlH;cACAmE;cACA;cAAA;cAAA;YAAA;cAAA;cAAA;cAEAnE;cACAI;cACA+D;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAEA;EAEA;EACAgD;IAAA;IACAhD;IACA;MAAA;IAAA;EACA;EAEA;EACAiD;IACA;IACA,8CACA,8CACA;IAEApH;MAAAvD;IAAA;IACA;IACA;IACA4K;MACArH;MACAA;QACAvD;QACA6H;QACAgD;MACA;IACA;EACA;EAEA;EACAC;IAAA;IACA;IACA;MACA;MACA;QACAhO;UAAA;YACAoD;YAAA3D;YAAA4D;YACAC;YAAAC;YACAC;UACA;QAAA;MACA;IACA;MACA;QACA;QACA;UAAA;QAAA;MACA;MACAxD,iBACAiO;QAAA;MAAA,GACArI;QAAA;UACAxC;UAAA3D;UAAA4D;UACAC;UAAAC;UACAC;QACA;MAAA;IACA;IACA;EACA;EAEA,yCACA0K;IAAA;EAAA;EACAC;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;EAAA;EACAC;IAAA;IAAA;IAAA;EAAA;EACAC;IAAA;IAAA;EAAA;EACAC;IAAA;MAAA;IAAA;EAAA;EACAC;IACA;MAAA;IAAA;IAAA,4CACA;MAAA;IAAA;MAAA;QAAA;QACA;UACA;YAAA;UAAA;UAAA;QACA;MACA;IAAA;MAAA;IAAA;MAAA;IAAA;IACA;EACA;EACAC;IAAA;IACA;IACA;MACA;MACA;QACApK;QAAAC;QACAI;QACAgK;MACA;IACA;EACA;EACAC;IAAA;IACA;IACA;IACA;MACA;QACA;UACA3L;UACAK;UAAA3D;UACA6K;UAAAxK;UACAuD;UAAAkH;UACAC;YACAhH;YACAkH;YAAAiE;YACAC;YAAAlD;UACA;QACA;MACA;IACA;IACA;IACAd;IACA;IAAA;EACA;EAEA,8BACAiE;IAAApI;MAAAuF;IAAA;EAAA;EACA8C;IAAArI;MAAAuF;IAAA;EAAA;EAEA,uCACA+C;IAAA;IAAA;EAAA;EACAC;IACA;MAAAC;IAAA;IACA;EACA;EACAC;IACA;MAAAD;IAAA;IACA;EACA;EACAE;IAAA;IACA;IACA;IAAA;IACA;IAAA;IACA;IAAA;IACA;IACA;IACA;MACA;QAAArP;QAAAiD;QAAAqM;MAAA;MACAvI;IACA;IACA;IACA;IACA;IACA;MACA;MACA;QACA;QACA;MACA;IACA;EACA;EACAwI;IACA;IACA;IACA;IACA;IAAA;IACA;EACA;EACAC;IACA;IACA;MACA,8FACA;MACA;IACA;IACA;IACA;EACA;EACAC;IAAA;IAAA;EAAA;EACAC;IACA;IAAA;IAAA;IACA;IAAA;IACA;IAAA;EACA;EAEA,sCACAC;IAAA;IACA;IACAlI;MACA;QACA;QACAuG;UACA;UACA4B;YACA;UACA;QACA;MACA;QACA;MACA;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACA;IACA;MAAAC;MAAAC;IAAA;EACA;EAEA,4CACAC;IACA;IACA;IACA;MAAA;IAAA;IACA;IACA;MACA;MACA;QACA;UAAA;QAAA;QACA;UAAAC;QAAA;MACA;IACA;EACA;EAEA,mCACAC;IAAA;IACA;IACA;IACA;IACA;IACA;MAAA;IAAA;EACA;EACAC;IACA;IAAA;IACApC;EACA;EAEA;EACAqC;IACA;IACA;IACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACl5DA;AAAA;AAAA;AAAA;AAA0/B,CAAgB,o/BAAG,EAAC,C;;;;;;;;;;;ACA9gC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/material/material-page.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./material-page.vue?vue&type=template&id=421059c6&scoped=true&\"\nvar renderjs\nimport script from \"./material-page.vue?vue&type=script&lang=js&\"\nexport * from \"./material-page.vue?vue&type=script&lang=js&\"\nimport style0 from \"./material-page.vue?vue&type=style&index=0&id=421059c6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"421059c6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/material/material-page.vue\"\nexport default component.exports","export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./material-page.vue?vue&type=template&id=421059c6&scoped=true&\"","var components\ntry {\n  components = {\n    customKeyboard: function () {\n      return import(\n        /* webpackChunkName: \"components/custom-keyboard/custom-keyboard\" */ \"@/components/custom-keyboard/custom-keyboard.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. æ’æŸ¥ç»„ä»¶åç§°æ‹¼å†™æ˜¯å¦æ­£ç¡®\")\n    console.error(\n      \"2. æ’æŸ¥ç»„ä»¶æ˜¯å¦ç¬¦åˆ easycom è§„èŒƒï¼Œæ–‡æ¡£ï¼šhttps://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. è‹¥ç»„ä»¶ä¸ç¬¦åˆ easycom è§„èŒƒï¼Œéœ€æ‰‹åŠ¨å¼•å…¥ï¼Œå¹¶åœ¨ components ä¸­æ³¨å†Œè¯¥ç»„ä»¶\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.flatMaterials.length\n  var l0 = _vm.__map(_vm.flatMaterials, function (m, idx) {\n    var $orig = _vm.__get_orig(m)\n    var m0 = _vm.nid === 2 ? _vm.getDepartmentNameByCode(m.department) : null\n    return {\n      $orig: $orig,\n      m0: m0,\n    }\n  })\n  var g1 = _vm.cartList.length\n  var l1 = _vm.cartOpen\n    ? _vm.__map(_vm.cartList, function (it, i) {\n        var $orig = _vm.__get_orig(it)\n        var g2 = !(it.delta > 0) ? Math.abs(it.delta) : null\n        return {\n          $orig: $orig,\n          g2: g2,\n        }\n      })\n    : null\n  var l2 = _vm.showCalculationModal\n    ? _vm.__map(\n        _vm.calculationDetails.outboundRecords,\n        function (record, __i1__) {\n          var $orig = _vm.__get_orig(record)\n          var m1 = _vm.getDepartmentName(record.toDepartment)\n          return {\n            $orig: $orig,\n            m1: m1,\n          }\n        }\n      )\n    : null\n  var l3 = _vm.showCalculationModal\n    ? _vm.__map(_vm.calculationDetails.bomRequirements, function (req, reqIdx) {\n        var $orig = _vm.__get_orig(req)\n        var m2 = _vm.getDepartmentName(req.department)\n        return {\n          $orig: $orig,\n          m2: m2,\n        }\n      })\n    : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function (val) {\n      return (_vm.qtyDialog = val)\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n        g1: g1,\n        l1: l1,\n        l2: l2,\n        l3: l3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./material-page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./material-page.vue?vue&type=script&lang=js&\"","<template>\n  <!-- æ–°å¢ï¼šå›ºå®šå®šä½å¼€å…³ -->\n  <view\n    class=\"container\"\n    :class=\"[\n      { 'container--drag-locked': dragScrollLock },\n      { 'container--fixed': containerFixed }\n    ]\"\n    :style=\"{\n      top: containerHeightPx ? (containerTopPx + 'px') : '',\n      height: containerHeightPx ? (containerHeightPx + 'px') : '',\n      transform: headHidePx ? ('translateY(' + (-headHidePx) + 'px)') : ''\n    }\"\n  >\n    <view\n      class=\"page\"\n      :class=\"{ 'page--drag-locked': dragScrollLock }\"\n      @touchstart=\"onEdgeTouchStart\"\n      @touchmove=\"onGlobalTouchMove\"\n      @touchend=\"onGlobalTouchEnd\"\n      @touchcancel=\"onGlobalTouchCancel\"\n    >\n      <view class=\"main\">\n        <!-- å·¦ä¾§åˆ†ç±» -->\n        <scroll-view\n          class=\"left\"\n          :scroll-y=\"!dragScrollLock\"\n          enhanced\n          :bounces=\"false\"\n          @scroll=\"onLeftScroll\"\n          :enable-flex=\"true\"\n        >\n          <view\n            v-for=\"c in categories\"\n            :key=\"c.id\"\n            :class=\"[\n              'cat',\n              selectedCategory && selectedCategory.id === c.id\n                ? 'cat--active'\n                : '',\n              isDragging &&\n              dragItem &&\n              dragItem.__dragType === 'category' &&\n              dragItem.id === c.id\n                ? 'cat--dragging'\n                : ''\n            ]\"\n            @click=\"selectCategory(c)\"\n            @longpress=\"beginDragCategory($event, c)\"\n          >\n            <view\n              class=\"cat-ind\"\n              v-if=\"selectedCategory && selectedCategory.id === c.id\"\n            ></view>\n            <text class=\"cat__txt\">{{ c.name }}</text>\n          </view>\n\n          <!-- æ–°å¢å¤§ç±»æŒ‰é’® -->\n          <view class=\"cat cat--add\" @click=\"showAddCategoryDialog\">\n            <view class=\"dots-container\">\n              <view class=\"dot dot-small\"></view>\n              <view class=\"dot dot-large\"></view>\n              <view class=\"dot dot-small\"></view>\n            </view>\n          </view>\n\n          <!-- æ‰¹é‡ä¸‹è½½æŒ‰é’® -->\n          <view\n            v-if=\"nid === 0 || nid === 1 || nid === 3\"\n            class=\"cat cat--download\"\n            @click=\"handleBatchDownload\"\n          >\n            <text class=\"cat__txt cat__txt--batch\">ğŸ“¥ æ‰¹é‡ä¸‹è½½</text>\n          </view>\n\n          <!-- æ‰¹é‡å‡ºåº“æŒ‰é’® -->\n          <view\n            v-if=\"nid === 2\"\n            class=\"cat cat--batch-out\"\n            @click=\"showBatchOutboundModal()\"\n          >\n            <text class=\"cat__txt cat__txt--batch\">ğŸ“¦ æ‰¹é‡å‡ºåº“</text>\n          </view>\n        </scroll-view>\n\n        <!-- å³ä¾§ææ–™åˆ—è¡¨ï¼ˆæ•´å—æ›¿æ¢ï¼‰ -->\n        <view class=\"right\">\n          <!-- æ ‡é¢˜æ”¾åœ¨ scroll-view å¤–ï¼šå¤©ç„¶å¸é¡¶ -->\n          <view class=\"right__title right__title--sticky\">\n            <text class=\"right__title__txt\">{{\n              selectedCategory ? selectedCategory.name : ''\n            }}</text>\n\n            <view class=\"title-buttons\">\n              <view class=\"smart-action-btn\" @click=\"handleSmartAction\">\n                <view class=\"dots-container\">\n                  <view class=\"dot dot-small\"></view>\n                  <view class=\"dot dot-large\"></view>\n                  <view class=\"dot dot-small\"></view>\n                </view>\n              </view>\n            </view>\n          </view>\n\n          <!-- å³ä¾§åˆ—è¡¨ä½¿ç”¨ scroll-viewï¼Œæ ‡é¢˜ç½®äºå¤–éƒ¨å®ç°å¸é¡¶ï¼›å¹¶æä¾›æ»šåŠ¨äº‹ä»¶ä¾›çˆ¶é¡µéšè—å¤´éƒ¨ -->\n          <scroll-view\n            class=\"right__list\"\n            :scroll-y=\"!dragScrollLock\"\n            enhanced\n            :bounces=\"false\"\n            :style=\"rightListHeightPx ? ('height:' + rightListHeightPx + 'px') : ''\"\n            @scroll=\"onRightScroll\"\n            :enable-flex=\"true\"\n          >\n            <!-- å•åˆ†ç±»ææ–™åˆ—è¡¨ï¼ˆæ¢å¤åŸå¸ƒå±€ï¼‰ -->\n            <block v-for=\"(m, idx) in flatMaterials\" :key=\"m.id\">\n              <view\n                :class=\"[\n                  'row',\n                  isDragging &&\n                  dragItem &&\n                  dragItem.__dragType === 'material' &&\n                  dragItem.id === m.id\n                    ? 'row--dragging'\n                    : ''\n                ]\"\n                @longpress=\"beginDragMaterial($event, m, idx)\"\n              >\n                <view class=\"row__info\">\n                  <view class=\"row__line\">\n                    <text class=\"lbl\">ç¼–ç ï¼š</text><text class=\"val\">{{ m.code }}</text>\n                  </view>\n                  <view class=\"row__line\">\n                    <text class=\"lbl\">æ•°é‡ï¼š</text>\n                    <text\n                      class=\"val\"\n                      :class=\"{ 'negative-quantity': nid === 1 && m.quantity < 0 }\"\n                    >{{ m.quantity }}</text>\n                    <view v-if=\"nid === 1\" class=\"quantity-detail\" @click=\"showCalculationDetail(m)\">\n                      <view class=\"qd-bar qd-bar--a\"></view>\n                      <view class=\"qd-bar qd-bar--b\"></view>\n                      <view class=\"qd-bar qd-bar--c\"></view>\n                      <view class=\"qd-bar qd-bar--d\"></view>\n                    </view>\n                  </view>\n                  <view class=\"row__line\">\n                    <text class=\"lbl\">{{ nid === 2 ? 'éƒ¨é—¨ï¼š' : 'æ‰¹æ¬¡ï¼š' }}</text>\n                    <text class=\"val\">{{ nid === 2 ? getDepartmentNameByCode(m.department) : m.batch || '-' }}</text>\n                  </view>\n                  <view class=\"row__line\">\n                    <text class=\"lbl\">è§„æ ¼ï¼š</text><text class=\"val\">{{ m.spec || '-' }}</text>\n                  </view>\n                </view>\n                <view class=\"row__ops\">\n                  <view v-if=\"nid === 2\" class=\"pill pill--blue\" @click=\"editMaterial(m)\">ä¿®æ”¹</view>\n                  <view v-if=\"nid === 2\" class=\"pill pill--orange\" @click=\"deleteMaterial(m)\">åˆ é™¤</view>\n                  <view v-if=\"nid !== 2\" class=\"pill pill--green\" @click=\"openQty('in', m)\">+</view>\n                  <view v-if=\"nid !== 2\" class=\"pill pill--red\" @click=\"openQty('out', m)\">-</view>\n                </view>\n              </view>\n              <view v-if=\"idx < flatMaterials.length - 1\" class=\"divider\"></view>\n            </block>\n          </scroll-view>\n        </view>\n      </view>\n\n      <!-- æ‹–æ‹½é®ç½©å±‚ï¼šå‡ºç°åæ‹¦æˆªæ‰€æœ‰è§¦æ‘¸ï¼Œé˜»æ­¢é¡µé¢æ»šåŠ¨ -->\n      <view\n        v-if=\"isDragging\"\n        class=\"drag-mask\"\n        catchtouchmove=\"true\"\n        @touchmove.stop.prevent=\"onDragMove\"\n        @touchend.stop.prevent=\"onDragEnd\"\n        @touchcancel.stop.prevent=\"onDragCancel\"\n      >\n        <!-- æ‹–æ‹½å½±å­ï¼ˆè·Ÿæ‰‹ç§»åŠ¨ï¼‰ -->\n        <view class=\"drag-ghost\" :style=\"ghostStyle\">\n          <text class=\"ghost-text\">{{\n            dragItem ? dragItem.code + ' - ' + dragItem.name : ''\n          }}</text>\n        </view>\n\n        <!-- æ™ºèƒ½æ–¹å‘åˆ é™¤åŒº -->\n        <view\n          class=\"drag-delete-zone\"\n          :class=\"[\n            zoneSide === 'bottom' ? 'from-bottom' : 'from-top',\n            zoneVisible ? 'enter' : 'leave',\n            isInDeleteZone ? 'drag-zone-active' : ''\n          ]\"\n          :style=\"zoneStyle\"\n          id=\"deleteZone\"\n        >\n          <text class=\"drag-zone-icon\">ğŸ—‘ï¸</text>\n          <text class=\"drag-zone-text\">\n            {{\n              isInDeleteZone\n                ? 'æ¾æ‰‹åˆ é™¤'\n                : zoneSide === 'bottom'\n                ? 'æ‹–åˆ°è¿™é‡Œåˆ é™¤'\n                : 'æ‹–åˆ°ä¸Šæ–¹åˆ é™¤'\n            }}\n          </text>\n        </view>\n      </view>\n\n      <!-- æŠ½å±‰é®ç½© -->\n      <view\n        class=\"drawer-overlay\"\n        v-if=\"drawerOpen || drawerDragging\"\n        @click=\"closeDrawer\"\n      ></view>\n\n      <!-- å³ä¾§æŠ½å±‰ï¼ˆå— right åƒç´ æ§åˆ¶ï¼‰ -->\n      <view\n        class=\"drawer\"\n        :class=\"[\n          { 'drawer--open': drawerOpen },\n          { 'drawer--dragging': drawerDragging }\n        ]\"\n        :style=\"{ right: drawerRightPx + 'px' }\"\n      >\n        <view class=\"drawer-header\">\n          <text class=\"drawer-title\">åŠŸèƒ½èœå•</text>\n        </view>\n        <view class=\"drawer-content\">\n          <view class=\"drawer-item\" @click=\"doSearch\">\n            <text class=\"drawer-icon\">ğŸ”</text>\n            <text class=\"drawer-text\">æœç´¢</text>\n          </view>\n          <view class=\"drawer-item\" @click=\"goRecords\">\n            <text class=\"drawer-icon\">ğŸ“‹</text>\n            <text class=\"drawer-text\">è®°å½•</text>\n          </view>\n          <view class=\"drawer-item\" @click=\"closeDrawer\">\n            <text class=\"drawer-icon\">âœ•</text>\n            <text class=\"drawer-text\">å…³é—­</text>\n          </view>\n        </view>\n        <view class=\"drawer-footer\"> </view>\n      </view>\n\n      <!-- è´­ç‰©è½¦æ‚¬æµ®æŒ‰é’® -->\n      <view v-if=\"cartList.length\" class=\"fab fab--cart\" @click=\"openCart\" :style=\"{ bottom: fabBottomPx + 'px' }\">\n        <text class=\"cart\">ğŸ›’</text>\n        <view class=\"badge\">{{ cartCount }}</view>\n      </view>\n\n      <!-- è‡ªå®šä¹‰é”®ç›˜ç»„ä»¶ -->\n      <custom-keyboard\n        :show=\"qtyDialog\"\n        @update:show=\"(val) => (qtyDialog = val)\"\n        :materialInfo=\"opMat\"\n        :operationType=\"opType === 'in' ? 'inbound' : 'outbound'\"\n        v-model=\"qtyStr\"\n        @confirm=\"confirmQty\"\n        @cancel=\"closeQty\"\n      />\n\n      <!-- è´­ç‰©è½¦é¢æ¿ -->\n      <view v-if=\"cartOpen\" class=\"mask\" @click=\"closeCart\"></view>\n      <view v-if=\"cartOpen\" class=\"cart-panel\" :style=\"{ bottom: cartBottomPx + 'px' }\">\n        <view class=\"cart-title\">è´­ç‰©è½¦æ¸…å•</view>\n        <scroll-view class=\"cart-list\" :scroll-y=\"true\" :enable-flex=\"true\">\n          <view v-for=\"(it, i) in cartList\" :key=\"it.id\" class=\"cart-item\">\n            <view class=\"cart-item-info\">\n              <text class=\"ci-name\">{{ it.name }}</text>\n              <text class=\"ci-code\">{{ it.code }}</text>\n              <text class=\"ci-qty\" :class=\"it.delta > 0 ? 'in' : 'out'\">\n                {{ it.delta > 0 ? 'å…¥åº“+' + it.delta : 'å‡ºåº“' + Math.abs(it.delta) }}\n              </text>\n              <text v-if=\"it.meta && it.meta.departmentName\" class=\"ci-code\">\n                éƒ¨é—¨ï¼š{{ it.meta.departmentName }}\n                <text v-if=\"it.meta.bomName\">/ BOMï¼š{{ it.meta.bomName }}</text>\n              </text>\n            </view>\n            <view class=\"cart-item-action\">\n              <view class=\"delete-btn\" @click=\"removeCartItem(it.id)\">åˆ é™¤</view>\n            </view>\n          </view>\n        </scroll-view>\n        <view class=\"cart-footer\">\n          <view class=\"cart-summary\">\n            <text class=\"summary-text\">å…± {{ cartCount }} é¡¹</text>\n          </view>\n          <view class=\"cart-actions\">\n            <view class=\"ca-btn ca-clear\" @click=\"clearCart\">æ¸…ç©º</view>\n            <view class=\"ca-btn ca-checkout\" @click=\"checkout\">ç»“ç®—</view>\n          </view>\n        </view>\n      </view>\n\n      <!-- æ–°å¢å¤§ç±»æ¨¡æ€æ¡† -->\n      <view v-if=\"showAddCategoryModal\" class=\"modal-mask\" @click=\"closeAddCategoryModal\"></view>\n      <view v-if=\"showAddCategoryModal\" class=\"add-category-modal\" :style=\"{ transform: 'translate(-50%, -50%) translateY(' + (-modalShiftPx) + 'px)' }\">\n        <view class=\"modal-title\">æ–°å¢</view>\n        <view class=\"modal-content\">\n          <view class=\"input-row\">\n            <text class=\"input-label\">åç§°ï¼š</text>\n            <input\n              class=\"input-field\"\n              v-model=\"newCategoryName\"\n              placeholder=\"è¯·è¾“å…¥åç§°\"\n              maxlength=\"20\"\n            />\n          </view>\n        </view>\n        <view class=\"modal-actions\">\n          <view class=\"modal-btn modal-cancel\" @click=\"closeAddCategoryModal\">å–æ¶ˆ</view>\n          <view class=\"modal-btn modal-confirm\" @click=\"confirmAddCategory\">ç¡®è®¤</view>\n        </view>\n      </view>\n\n      <!-- æ–°å¢ææ–™æ¨¡æ€æ¡† -->\n      <view v-if=\"showAddMaterialModal\" class=\"modal-mask\" @click=\"closeAddMaterialModal\"></view>\n      <view v-if=\"showAddMaterialModal\" class=\"add-material-modal\" :style=\"{ transform: 'translate(-50%, -50%) translateY(' + (-modalShiftPx) + 'px)' }\">\n        <view class=\"modal-title\">æ–°å¢ææ–™</view>\n        <view class=\"modal-content\">\n          <view class=\"input-row\">\n            <text class=\"input-label\">ææ–™ç¼–ç ï¼š</text>\n            <input\n              class=\"input-field\"\n              v-model=\"newMaterial.code\"\n              placeholder=\"è¯·è¾“å…¥ææ–™ç¼–ç \"\n              maxlength=\"30\"\n            />\n          </view>\n          <view class=\"input-row\">\n            <text class=\"input-label\">åˆå§‹æ•°é‡ï¼š</text>\n            <input\n              class=\"input-field\"\n              v-model=\"newMaterial.quantity\"\n              placeholder=\"è¯·è¾“å…¥åˆå§‹æ•°é‡\"\n              type=\"number\"\n            />\n          </view>\n          <view class=\"input-row\">\n            <text class=\"input-label\">æ‰¹æ¬¡ï¼š</text>\n            <input\n              class=\"input-field\"\n              v-model=\"newMaterial.batch\"\n              placeholder=\"è¯·è¾“å…¥æ‰¹æ¬¡ï¼ˆå¦‚ï¼š20250927ï¼‰\"\n              maxlength=\"8\"\n              type=\"number\"\n            />\n          </view>\n          <view class=\"input-row\">\n            <text class=\"input-label\">è§„æ ¼ï¼š</text>\n            <input\n              class=\"input-field\"\n              v-model=\"newMaterial.spec\"\n              placeholder=\"è¯·è¾“å…¥è§„æ ¼\"\n              maxlength=\"100\"\n            />\n          </view>\n        </view>\n        <view class=\"modal-actions\">\n          <view class=\"modal-btn modal-cancel\" @click=\"closeAddMaterialModal\">å–æ¶ˆ</view>\n          <view class=\"modal-btn modal-confirm\" @click=\"confirmAddMaterial\">ç¡®è®¤</view>\n        </view>\n      </view>\n\n      <!-- è½¦é—´ä»“æ•°é‡è®¡ç®—è¯¦æƒ…æ¨¡æ€æ¡† -->\n      <view v-if=\"showCalculationModal\" class=\"modal-overlay\" @click=\"closeCalculationModal\">\n        <view class=\"calculation-modal\" @click.stop>\n          <view class=\"modal-header\">\n            <text class=\"modal-title\">{{\n              (selectedMaterialForCalc ? selectedMaterialForCalc.name : '') + ' æ•°é‡è®¡ç®—è¯¦æƒ…'\n            }}</text>\n            <view class=\"modal-close-btn\" @click=\"closeCalculationModal\">Ã—</view>\n          </view>\n          <view class=\"modal-content\">\n            <view class=\"calc-section\">\n              <text class=\"calc-title\">ä¸»æä»“å‡ºåº“åˆ°ç”Ÿäº§éƒ¨é—¨ï¼š</text>\n              <view\n                v-for=\"record in calculationDetails.outboundRecords\"\n                :key=\"record.id\"\n                class=\"calc-item\"\n              >\n                <text class=\"calc-dept\">{{ getDepartmentName(record.toDepartment) }}</text>\n                <text class=\"calc-quantity\">+{{ record.quantity }}</text>\n                <text class=\"calc-date\">{{ record.date }}</text>\n              </view>\n              <view class=\"calc-total\">\n                <text class=\"calc-label\">å‡ºåº“æ€»è®¡ï¼š</text>\n                <text class=\"calc-value\">{{ calculationDetails.totalOutbound }}</text>\n              </view>\n            </view>\n\n            <view class=\"calc-section\">\n              <text class=\"calc-title\">BOMéœ€æ±‚æ•°é‡ï¼š</text>\n              <view\n                v-for=\"(req, reqIdx) in calculationDetails.bomRequirements\"\n                :key=\"reqIdx\"\n                class=\"calc-item\"\n              >\n                <text class=\"calc-dept\">{{ getDepartmentName(req.department) }}</text>\n                <text class=\"calc-quantity negative\">-{{ req.requiredQuantity }}</text>\n              </view>\n              <view class=\"calc-total\">\n                <text class=\"calc-label\">éœ€æ±‚æ€»è®¡ï¼š</text>\n                <text class=\"calc-value negative\">-{{ calculationDetails.totalRequired }}</text>\n              </view>\n            </view>\n\n            <view class=\"calc-result\">\n              <text class=\"result-label\">è½¦é—´ä»“å®é™…æ•°é‡ï¼š</text>\n              <text class=\"result-value\" :class=\"{ negative: calculationDetails.finalQuantity < 0 }\">\n                {{ calculationDetails.finalQuantity }}\n              </text>\n            </view>\n          </view>\n          <view class=\"modal-actions\">\n            <view class=\"modal-btn modal-confirm\" @click=\"closeCalculationModal\">ç¡®å®š</view>\n          </view>\n        </view>\n      </view>\n\n      <!-- æ‰¹é‡å‡ºåº“æ¨¡æ€æ¡† -->\n      <view v-if=\"showBatchOutboundDialog\" class=\"modal-overlay\" @click=\"closeBatchOutboundModal\">\n        <view class=\"batch-outbound-modal\" @click.stop>\n          <view class=\"modal-header\">\n            <text class=\"modal-title\">æ‰¹é‡å‡ºåº“</text>\n            <view class=\"modal-close-btn\" @click=\"closeBatchOutboundModal\">Ã—</view>\n          </view>\n          <view class=\"modal-content\">\n            <!-- éƒ¨é—¨é€‰æ‹©å™¨ -->\n            <view class=\"form-section\">\n              <text class=\"section-title\">é€‰æ‹©éƒ¨é—¨ï¼š</text>\n              <view class=\"dept-selector\">\n                <view\n                  v-for=\"dept in productionDepartments\"\n                  :key=\"dept.code\"\n                  class=\"dept-item\"\n                  :class=\"{\n                    'dept-item--selected':\n                      selectedOutboundDepartment && selectedOutboundDepartment.code === dept.code\n                  }\"\n                  @click=\"selectOutboundDepartment(dept)\"\n                >\n                  <text class=\"dept-name\">{{ dept.name }}</text>\n                </view>\n              </view>\n            </view>\n\n            <!-- æ‰¹å·é€‰æ‹©å™¨ -->\n            <view class=\"form-section\" v-if=\"selectedOutboundDepartment\">\n              <text class=\"section-title\">é€‰æ‹©æ‰¹å·ï¼š</text>\n              <view class=\"batch-selector\">\n                <view\n                  v-for=\"batch in availableBatches\"\n                  :key=\"batch.id\"\n                  class=\"batch-item\"\n                  :class=\"{\n                    'batch-item--selected': selectedBatch && selectedBatch.id === batch.id,\n                    'batch-item--disabled': batch.used\n                  }\"\n                  @click=\"selectBatch(batch)\"\n                >\n                  <text class=\"batch-name\">{{ batch.name }}</text>\n                  <text class=\"batch-status\" v-if=\"batch.used\">å·²å‡ºåº“</text>\n                </view>\n              </view>\n            </view>\n\n            <!-- ç‰©æ–™æ¸…å•é¢„è§ˆ -->\n            <view class=\"form-section\" v-if=\"selectedBatch && selectedOutboundDepartment\">\n              <text class=\"section-title\">å‡ºåº“ç‰©æ–™æ¸…å•ï¼š</text>\n              <view class=\"outbound-preview\">\n                <view\n                  v-for=\"item in outboundPreview\"\n                  :key=\"item.materialCode\"\n                  class=\"preview-item\"\n                >\n                  <view class=\"preview-info\">\n                    <text class=\"preview-name\">{{ item.materialName }}</text>\n                    <text class=\"preview-code\">{{ item.materialCode }}</text>\n                  </view>\n                  <view class=\"preview-quantity\">\n                    <text\n                      class=\"preview-workshop\"\n                      :class=\"{ insufficient: item.workshopQuantity < item.outboundQuantity }\"\n                      >è½¦é—´ä»“: {{ item.workshopQuantity }}</text\n                    >\n                    <text class=\"preview-outbound\">å‡ºåº“é‡: {{ item.outboundQuantity }}</text>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n          <view class=\"modal-actions\">\n            <view class=\"modal-btn modal-cancel\" @click=\"closeBatchOutboundModal\">å–æ¶ˆ</view>\n            <view\n              class=\"modal-btn modal-confirm\"\n              :class=\"{ 'btn-disabled': !canConfirmOutbound }\"\n              @click=\"confirmBatchOutbound\"\n              >ç¡®è®¤å‡ºåº“</view\n            >\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { uiUtils } from '@/common/util.js'\nimport OutboundTypePicker from '@/components/outbound-type-picker/OutboundTypePicker.vue';\nimport { getOutboundTypeLabel } from '@/store/constants.js'\n\nexport default {\n  name: 'materialPage',\n  components: { OutboundTypePicker },\n  props: { nid: { type: Number, default: 0 } },\n  data() {\n    return {\n      // ç”¨æˆ·äº¤äº’çŠ¶æ€\n      _userInteracted: false,\n      // å®¹å™¨é«˜åº¦ï¼ˆåƒç´ ï¼‰\n      containerHeightPx: 0,\n      // å®¹å™¨é¡¶éƒ¨ä½ç½®ï¼ˆåƒç´ ï¼‰\n      containerTopPx: 0,\n      // å®¹å™¨å›ºå®šå®šä½å¼€å…³\n      containerFixed: false,\n      // å³ä¾§åˆ—è¡¨é«˜åº¦ï¼ˆåƒç´ ï¼‰\n      rightListHeightPx: 0,\n\n      // å¤´éƒ¨ä¸Šæ»‘éšè—è¿›åº¦ï¼ˆé¡µå†…é¡¶å‡ºå¤´éƒ¨ï¼‰\n      headHidePx: 0,        // å½“å‰å·²éšè—çš„é«˜åº¦ï¼ˆpxï¼‰\n      _headHideMaxPx: 0,    // æœ€å¤§å¯éšè—é«˜åº¦ï¼ˆpxï¼‰ï¼Œmounted ä¸­è®¡ç®—\n      _prevScrollTop: 0,    // ä¸Šä¸€æ¬¡æ»šåŠ¨ä½ç½®ï¼ˆç”¨äºåˆ¤æ–­æ–¹å‘/å¢é‡ï¼‰\n      _containerTopBasePx: 0, // åˆå§‹å®¹å™¨ top åŸºçº¿ï¼ˆé¿å… windowTop æ³¢åŠ¨ï¼‰\n\n      // æ‹–æ‹½çŠ¶æ€çœ‹é—¨ç‹—\n      _dragWatch: null,\n      _lastMoveTs: 0,\n\n      // å³ä¾§æŠ½å±‰\n      drawerOpen: false,\n      drawerDragging: false,\n      drawerWidthPx: 0,\n      drawerRightPx: 0,\n      swipe: { tracking: false, startX: 0, startY: 0, lastX: 0 },\n\n      // æ¨ªå‘æ¢æ æ‰‹åŠ¿\n      axisSwipe: { tracking: false, startX: 0, startY: 0, lastX: 0, consumed: false },\n\n      // é€‰æ‹©/æ‹–æ‹½\n      selectedCategory: null,\n      selectedCategories: [],\n      selectedMaterials: [],\n\n      // æ‹–æ‹½çŠ¶æ€ï¼ˆç»Ÿä¸€ç‰ˆï¼‰\n      isDragging: false,\n      isInDeleteZone: false,\n      dragScrollLock: false,\n      dragTarget: null, // { type:'category'|'material', id, payload }\n\n      // æ–°å¢ï¼šå®Œæ•´æ‹–æ‹½åŠŸèƒ½æ•°æ®\n      dragItem: null,\n      dragIndex: -1,\n      // è·Ÿæ‰‹åæ ‡ï¼ˆpxï¼‰\n      dragX: 0,\n      dragY: 0,\n      // åˆ é™¤åŒºå‘½ä¸­\n      deleteZoneRect: null,\n      _lastHit: false,\n\n      // è‡ªå®šä¹‰é•¿æŒ‰åˆ¤å®šï¼ˆå¯é€‰ï¼‰\n      _lpTimer: null,\n      _pressed: false,\n      _longpressArmed: false,\n      _startCandidate: null,\n\n      // æ™ºèƒ½åˆ é™¤åŒºæ•°æ®\n      zoneSide: 'bottom', // 'top' | 'bottom'\n      zoneVisible: false, // æ§åˆ¶ enter/leave åŠ¨ç”»\n      zoneStyle: {}, // å®‰å…¨åŒº/é”®ç›˜è¡¥å¿ç­‰å¯æ”¾è¿™é‡Œ\n\n      _winH: 0,\n      _safeTop: 0,\n      _safeBottom: 0,\n\n      // é€‰é¡¹å¡åˆ†ç±»\n      tabCategories: {\n        0: [\n          { id: 1, name: 'ææ–™1' }, { id: 2, name: 'ææ–™2' },\n          { id: 3, name: 'ææ–™3' }, { id: 4, name: 'ææ–™4' },\n          { id: 5, name: 'ææ–™5' }\n        ],\n        1: [\n          { id: 1, name: 'ææ–™1' }, { id: 2, name: 'ææ–™2' },\n          { id: 3, name: 'ææ–™3' }, { id: 4, name: 'ææ–™4' },\n          { id: 5, name: 'ææ–™5' }\n        ],\n        2: [\n          { id: 1, name: 'DWII01A' }, { id: 2, name: 'DWII02A' },\n          { id: 3, name: 'DWII03A' }, { id: 4, name: 'DWII04A' },\n          { id: 5, name: 'DWII05A' }\n        ],\n        3: [\n          { id: 1, name: 'åŒ…è£…ç›’' }, { id: 2, name: 'é˜²æ½®è¢‹' }, { id: 3, name: 'ç¼“å†²ææ–™' },\n          { id: 4, name: 'æ ‡ç­¾è´´çº¸' }, { id: 5, name: 'è¯´æ˜ä¹¦' }, { id: 6, name: 'åˆæ ¼è¯' }\n        ],\n        4: [\n          { id: 1, name: 'ç¡…ç¢³ç²‰' }, { id: 2, name: 'å¯¼ç”µå‰‚' }, { id: 3, name: 'ç²˜ç»“å‰‚' },\n          { id: 4, name: 'æº¶å‰‚' }, { id: 5, name: 'æ·»åŠ å‰‚' }, { id: 6, name: 'å‚¬åŒ–å‰‚' }\n        ],\n        5: [\n          { id: 1, name: 'å¾…æ£€éªŒ' }, { id: 2, name: 'å¾…å…¥åº“' }, { id: 3, name: 'å¾…å‡ºåº“' },\n          { id: 4, name: 'å¾…æŠ¥åºŸ' }, { id: 5, name: 'å¾…é€€è´§' }, { id: 6, name: 'å¼‚å¸¸å¤„ç†' }\n        ]\n      },\n\n      // ææ–™ç»„ï¼ˆç¤ºä¾‹æ•°æ®ï¼‰\n      groups: [\n        // ä¸»æä»“ (tab 0)\n        { scope: 0, title: 'ææ–™1', materials: [\n          { id: 1001, code: 'ELY-001', name: 'ææ–™1', quantity: 520, batch: '20250920', spec: '4.5V' }\n        ]},\n        { scope: 0, title: 'ææ–™2', materials: [\n          { id: 1002, code: 'ELY-002', name: 'ææ–™2', quantity: 300, batch: '20250921', spec: '-30â„ƒ' }\n        ]},\n        { scope: 0, title: 'ææ–™3', materials: [\n          { id: 1003, code: 'ELY-003', name: 'ææ–™3', quantity: 260, batch: '20250922', spec: '6.0V' }\n        ]},\n        { scope: 0, title: 'ææ–™4', materials: [\n          { id: 1004, code: 'ELY-004', name: 'ææ–™4', quantity: 180, batch: '20250923', spec: '3.7V' }\n        ]},\n        { scope: 0, title: 'ææ–™5', materials: [\n          { id: 1005, code: 'ELY-005', name: 'ææ–™5', quantity: 220, batch: '20250924', spec: '5.2V' }\n        ]},\n\n        // è½¦é—´ä»“ (tab 1)\n        { scope: 1, title: 'ææ–™1', materials: [\n          { id: 2001, code: 'ELY-001', name: 'ææ–™1', quantity: 20, batch: '20250910', spec: '3.7V' }\n        ]},\n        { scope: 1, title: 'ææ–™2', materials: [\n          { id: 2002, code: 'ELY-002', name: 'ææ–™2', quantity: 5, batch: '20250911', spec: '4.2V' }\n        ]},\n        { scope: 1, title: 'ææ–™3', materials: [\n          { id: 2003, code: 'ELY-003', name: 'ææ–™3', quantity: -5, batch: '20250912', spec: '6.0V' }\n        ]},\n        { scope: 1, title: 'ææ–™4', materials: [\n          { id: 2004, code: 'ELY-004', name: 'ææ–™4', quantity: -10, batch: '20250905', spec: '3.7V' }\n        ]},\n        { scope: 1, title: 'ææ–™5', materials: [\n          { id: 2005, code: 'ELY-005', name: 'ææ–™5', quantity: -5, batch: '20250906', spec: '5.2V' }\n        ]},\n\n        // BOM (tab 2)\n        { scope: 2, title: 'DWII01A', materials: [\n          { id: 3001, code: 'ELY-001', name: 'ææ–™1', quantity: 50, department: 'MIXING', spec: 'é…æ–™ç”¨' },\n          { id: 3002, code: 'ELY-002', name: 'ææ–™2', quantity: 30, department: 'COATING', spec: 'åˆ¶ç‰‡ç”¨' }\n        ]},\n        { scope: 2, title: 'DWII02A', materials: [\n          { id: 3003, code: 'ELY-003', name: 'ææ–™3', quantity: 40, department: 'WINDING', spec: 'å·ç»•ç”¨' },\n          { id: 3004, code: 'ELY-004', name: 'ææ–™4', quantity: 25, department: 'PACKAGING', spec: 'å°è£…ç”¨' }\n        ]},\n        { scope: 2, title: 'DWII03A', materials: [\n          { id: 3005, code: 'ELY-005', name: 'ææ–™5', quantity: 35, department: 'FILLING', spec: 'æ³¨æ¶²ç”¨' },\n          { id: 3006, code: 'ELY-006', name: 'ææ–™6', quantity: 20, department: 'PACKING', spec: 'åŒ…è£…ç”¨' }\n        ]},\n      ],\n\n      // è´­ç‰©è½¦\n      cartList: [],\n      qtyDialog: false,\n      opType: 'in',\n      qtyStr: '',\n      opMat: null,\n\n      // æŒ‰BOMæ‰¹é‡å‘æ–™ï¼ˆä¿ç•™ç”¨çš„è¯éœ€è¦è¿™äº›ï¼‰\n      showBatchIssueDialog: false,\n      selectedDepartment: null,\n      selectedBom: null,\n      batchQuantity: 1,\n      issuePreview: [],\n      cartOpen: false,\n      // å®‰å…¨åŒºä¸æµ®å±‚åç§»\n      _safeBottom: 0,\n      fabBottomPx: 0,\n      cartBottomPx: 0,\n      // é”®ç›˜é¿è®© - æ¨¡æ€ä¸Šç§»åç§»é‡\n      modalShiftPx: 0,\n\n      // æ–°å¢å¤§ç±»/ææ–™\n      showAddCategoryModal: false,\n      showAddMaterialModal: false,\n      newCategoryName: '',\n      newMaterial: { code: '', name: '', quantity: 0, batch: '', spec: '' },\n\n      // ç”Ÿäº§éƒ¨é—¨ã€å‡ºå…¥åº“è®°å½•ã€BOMéœ€æ±‚\n      productionDepartments: [\n        { id: 1, name: 'é…æ–™', code: 'MIXING' },\n        { id: 2, name: 'åˆ¶ç‰‡', code: 'COATING' },\n        { id: 3, name: 'å·ç»•', code: 'WINDING' },\n        { id: 4, name: 'å°è£…', code: 'PACKAGING' },\n        { id: 5, name: 'æ³¨æ¶²', code: 'FILLING' },\n        { id: 6, name: 'åŒ…è£…', code: 'PACKING' }\n      ],\n      outboundRecords: [\n        { id: 1, materialCode: 'ELY-001', materialName: 'ææ–™1', fromWarehouse: 'main', toDepartment: 'MIXING', quantity: 50, date: '2025-09-20' },\n        { id: 2, materialCode: 'ELY-001', materialName: 'ææ–™1', fromWarehouse: 'main', toDepartment: 'COATING', quantity: 30, date: '2025-09-21' },\n        { id: 3, materialCode: 'ELY-002', materialName: 'ææ–™2', fromWarehouse: 'main', toDepartment: 'WINDING', quantity: 40, date: '2025-09-22' }\n      ],\n      bomRequirements: [\n        { materialCode: 'ELY-001', materialName: 'ææ–™1', requiredQuantity: 60, department: 'MIXING' },\n        { materialCode: 'ELY-001', materialName: 'ææ–™1', requiredQuantity: 40, department: 'COATING' },\n        { materialCode: 'ELY-002', materialName: 'ææ–™2', requiredQuantity: 35, department: 'WINDING' }\n      ],\n\n      // è®¡ç®—è¯¦æƒ…\n      showCalculationModal: false,\n      selectedMaterialForCalc: null,\n      calculationDetails: { outboundRecords: [], bomRequirements: [], totalOutbound: 0, totalRequired: 0, finalQuantity: 0 },\n\n      // æ‰¹é‡å‡ºåº“\n      showBatchOutboundDialog: false,\n      selectedBatch: null,\n      selectedOutboundDepartment: null,\n      outboundPreview: [],\n      usedBatches: [], // å·²å‡ºåº“çš„æ‰¹å·åˆ—è¡¨\n      outboundType: '', // å‡ºåº“ç±»åˆ«\n\n      bomList: [\n        {\n          id: 1, name: 'DWII01A', spec: '3.7V 2600mAh', department: 'MIXING',\n          materials: [\n            { materialCode: 'ELY-001', materialName: 'ææ–™1', requiredQuantity: 10 },\n            { materialCode: 'ELY-002', materialName: 'ææ–™2', requiredQuantity: 5 }\n          ]\n        },\n        {\n          id: 2, name: 'DWII02A', spec: '3.7V 3000mAh', department: 'COATING',\n          materials: [\n            { materialCode: 'ELY-001', materialName: 'ææ–™1', requiredQuantity: 8 },\n            { materialCode: 'ELY-003', materialName: 'ææ–™3', requiredQuantity: 12 }\n          ]\n        },\n        {\n          id: 3, name: 'DWII03A', spec: '3.7V 3500mAh', department: 'WINDING',\n          materials: [\n            { materialCode: 'ELY-002', materialName: 'ææ–™2', requiredQuantity: 15 },\n            { materialCode: 'ELY-004', materialName: 'ææ–™4', requiredQuantity: 7 }\n          ]\n        }\n      ]\n    }\n  },\n\n  watch: {\n    isDragging(v) {\n      if (v) {\n        this._lastMoveTs = Date.now()\n        clearInterval(this._dragWatch)\n        this._dragWatch = setInterval(() => {\n          if (!this.isDragging) return\n          if (Date.now() - this._lastMoveTs > 2000) {\n            this.teardownDeleteZone()\n            this._resetDrag()\n            clearInterval(this._dragWatch)\n          }\n        }, 500)\n      } else {\n        clearInterval(this._dragWatch)\n        this.dragScrollLock = false\n      }\n    },\n    nid: {\n      immediate: true,\n      handler(v) {\n        const cats = this.tabCategories[v] || this.tabCategories[0]\n        this.selectedCategory = cats[0]\n        // ç¡®ä¿å½“å‰æ ‡ç­¾ä¸‹çš„æ‰€æœ‰åˆ†ç±»åˆ†ç»„å­˜åœ¨ï¼ˆæ‡’åˆ›å»ºï¼‰\n        this.ensureGroupsForTab(v)\n        this.$nextTick(() => this._calcContainerAndListHeights())\n      }\n    },\n    batchQuantity() {\n      if (this.selectedBom) this.generateIssuePreview()\n    }\n  },\n\n  beforeDestroy() {\n    clearInterval(this._dragWatch)\n    // #ifdef H5\n    window.removeEventListener('resize', this._onResize)\n    // #endif\n  },\n\n  computed: {\n    categories() {\n      return this.tabCategories[this.nid] || this.tabCategories[0]\n    },\n    flatMaterials() {\n      if (!this.selectedCategory) return []\n      const g = this.findGroupByTabAndTitle(this.nid, this.selectedCategory.name)\n      if (this.nid === 1 && g) {\n        // è½¦é—´ä»“æ•°é‡ = ä¸»æä»“å‡ºåº“æ€»é‡ - BOMéœ€æ±‚æ€»é‡ï¼ˆå…è®¸ä¸ºè´Ÿï¼‰\n        return g.materials.map(material => ({\n          ...material,\n          quantity: this.calculateWorkshopQuantity(material.code),\n          originalQuantity: material.quantity\n        }))\n      }\n      return g ? g.materials : []\n    },\n    cartCount() {\n      return this.cartList.length\n    },\n    cartAgg() {\n      const map = {}\n      for (const it of this.cartList) {\n        const key = it.code + '|' + it.name\n        if (!map[key]) map[key] = { code: it.code, name: it.name, total: 0 }\n        map[key].total += it.delta\n      }\n      return Object.values(map)\n    },\n    availableBoms() {\n      if (!this.selectedDepartment) return []\n      return this.bomList.filter(b => b.department === this.selectedDepartment.code)\n    },\n    canConfirmIssue() {\n      return !!(this.selectedDepartment && this.selectedBom && this.batchQuantity > 0 && this.issuePreview.length > 0)\n    },\n    availableBatches() {\n      // è¿”å›æ‰€æœ‰å¯ç”¨çš„æ‰¹å·ï¼ˆBOMæ‰¹å·ï¼‰\n      const batches = [\n        { id: 1, name: 'DWII01A', used: this.usedBatches.includes('DWII01A') },\n        { id: 2, name: 'DWII02A', used: this.usedBatches.includes('DWII02A') },\n        { id: 3, name: 'DWII03A', used: this.usedBatches.includes('DWII03A') }\n      ]\n      return batches\n    },\n    canConfirmOutbound() {\n      return !!(this.selectedBatch && this.selectedOutboundDepartment && this.outboundPreview.length > 0)\n    },\n    // æ™ºèƒ½æŒ‰é’®é…ç½®\n    smartButtonConfig() {\n      if (!this.selectedCategory) return { text: 'æ–°å¢', action: 'add', icon: 'â•' }\n      // æ ¹æ®ä¸åŒæ ä½é…ç½®æŒ‰é’®\n      const categoryName = this.selectedCategory.name\n      // BOMæ æ˜¾ç¤º\"ä¸Šä¼ \"\n      if (categoryName === 'BOM' || this.tabCategories[2]?.some(cat => cat && cat.name === categoryName)) {\n        return { text: 'ä¸Šä¼ ', action: 'upload', icon: 'ğŸ“¤' }\n      }\n      // å…¶ä»–æ ä½æ˜¾ç¤º\"æ–°å¢\"\n      return { text: 'æ–°å¢', action: 'add', icon: 'â•' }\n    },\n    // æ‹–æ‹½å½±å­æ ·å¼\n    ghostStyle() {\n      return `left:${this.dragX}px; top:${this.dragY}px;`\n    }\n  },\n\n  created() {\n    const cats = this.tabCategories[this.nid] || this.tabCategories[0]\n    this.selectedCategory = cats[0]\n    // åˆå§‹åŒ–æ—¶ç¡®ä¿å½“å‰æ ‡ç­¾åˆ†ç»„å­˜åœ¨\n    this.ensureGroupsForTab(this.nid)\n    this.loadCartList()\n  },\n\n  mounted() {\n    this.drawerWidthPx = uni.upx2px(500)\n    this.drawerRightPx = -this.drawerWidthPx\n\n    // ç›‘å¬ç”¨æˆ·é¦–æ¬¡äº¤äº’ï¼ˆä»…åœ¨H5ç¯å¢ƒä¸‹ï¼‰\n    // #ifdef H5\n    const mark = () => { this._userInteracted = true }\n    if (typeof document !== 'undefined') {\n      document.addEventListener('touchstart', mark, { once: true, passive: true })\n      document.addEventListener('mousedown', mark, { once: true })\n    }\n    // #endif\n\n    // åœ¨å°ç¨‹åºç¯å¢ƒä¸‹ï¼Œç›´æ¥æ ‡è®°ä¸ºå·²äº¤äº’\n    // #ifndef H5\n    this._userInteracted = true\n    // #endif\n\n    // è·å–ç³»ç»Ÿä¿¡æ¯ç”¨äºæ™ºèƒ½åˆ é™¤åŒºå’Œè®¡ç®—å³ä¾§åˆ—è¡¨é«˜åº¦\n    uni.getSystemInfo({\n      success: (info) => {\n        this._winH = info.windowHeight || 0\n        // H5/APP ä¸€èˆ¬æœ‰ safeAreaInsetsï¼›æ²¡æœ‰åˆ™ä¸º 0\n        this._safeTop = (info.safeAreaInsets && info.safeAreaInsets.top) || 0\n        this._safeBottom = (info.safeAreaInsets && info.safeAreaInsets.bottom) || 0\n\n        // è®¡ç®—è´­ç‰©è½¦å…¥å£ä¸å¼¹çª—çš„åŠ¨æ€ bottom åç§»\n        this._updateFloatingOffsets()\n\n        // è®¡ç®—æœ€å¤§å¯éšè—é«˜åº¦ï¼šçº¦ 88rpxï¼ˆâ‰ˆ 44dpï¼‰\n        this._headHideMaxPx = Math.max(40, uni.upx2px(88))\n\n        // è®¡ç®—ä¸€æ¬¡åˆå§‹æ ·å¼ï¼ˆå¯é€‰ï¼‰\n        this.zoneStyle = {}\n\n        // è®¡ç®—å®¹å™¨å’Œå³ä¾§åˆ—è¡¨é«˜åº¦\n        this.$nextTick(() => { this._calcContainerAndListHeights() })\n      }\n    })\n\n    // æ—‹è½¬/é”®ç›˜å¯¼è‡´çª—å£é«˜å˜åŠ¨æ—¶ï¼Œé‡ç®—ä¸€æ¬¡\n    // #ifdef MP-WEIXIN\n    wx.onWindowResize && wx.onWindowResize(() => this.$nextTick(() => this._calcContainerAndListHeights()))\n    // #endif\n\n    // #ifdef H5\n    this._onResize = () => this.$nextTick(() => { this._calcContainerAndListHeights(); this._updateFloatingOffsets(); this._updateModalShift() })\n    window.addEventListener('resize', this._onResize, { passive: true })\n    // #endif\n  },\n\n  // é¡µé¢ç”Ÿå‘½å‘¨æœŸ - é¡µé¢éšè—æ—¶é‡ç½®æ‹–æ‹½çŠ¶æ€\n  onHide() {\n    if (this.isDragging) {\n      console.log('é¡µé¢éšè—ï¼Œé‡ç½®æ‹–æ‹½çŠ¶æ€')\n      this.resetDragState()\n    }\n  },\n  // é¡µé¢ç”Ÿå‘½å‘¨æœŸ - é¡µé¢å¸è½½æ—¶é‡ç½®æ‹–æ‹½çŠ¶æ€\n  onUnload() {\n    if (this.isDragging) {\n      console.log('é¡µé¢å¸è½½ï¼Œé‡ç½®æ‹–æ‹½çŠ¶æ€')\n      this.resetDragState()\n    }\n  },\n\n  // ç»„ä»¶é”€æ¯å‰æ¸…ç†èµ„æº\n  beforeDestroy() {\n    clearInterval(this._dragWatch)\n    // #ifdef H5\n    window.removeEventListener('resize', this._onResize)\n    // #endif\n  },\n\n  // é¡µé¢ç”Ÿå‘½å‘¨æœŸ - é¡µé¢æ˜¾ç¤ºæ—¶æ£€æŸ¥æ‹–æ‹½çŠ¶æ€\n  onShow() {\n    // å¦‚æœé¡µé¢é‡æ–°æ˜¾ç¤ºæ—¶å‘ç°æ‹–æ‹½çŠ¶æ€å¼‚å¸¸ï¼Œè¿›è¡Œé‡ç½®\n    if (this.isDragging) {\n      console.log('é¡µé¢æ˜¾ç¤ºæ—¶å‘ç°æ‹–æ‹½çŠ¶æ€å¼‚å¸¸ï¼Œé‡ç½®çŠ¶æ€')\n      this.resetDragState()\n    }\n  },\n\n  methods: {\n    // è®¡ç®—è´­ç‰©è½¦å…¥å£ä¸è´­ç‰©è½¦å¼¹çª—çš„åº•éƒ¨åç§»ï¼Œé¿å…è¢«åº•éƒ¨å®‰å…¨åŒºæˆ–ç³»ç»Ÿæ é®æŒ¡\n    _updateFloatingOffsets() {\n      try {\n        const info = uni.getSystemInfoSync && uni.getSystemInfoSync()\n        let safeBottom = 0\n        if (info && info.safeAreaInsets && typeof info.safeAreaInsets.bottom === 'number') {\n          safeBottom = info.safeAreaInsets.bottom\n        } else if (info && info.safeArea && info.screenHeight) {\n          // å…¼å®¹ä¸æ”¯æŒ safeAreaInsets çš„ç¯å¢ƒ\n          safeBottom = Math.max(0, info.screenHeight - (info.safeArea.bottom || info.windowHeight || 0))\n        } else {\n          safeBottom = this._safeBottom || 0\n        }\n\n        // åœ¨ H5/APP ä¸‹æŠŠ rpx è½¬ä¸º pxï¼Œå†åŠ ä¸Šå®‰å…¨åŒº\n        const fabExtra = uni.upx2px(180)\n        const panelExtra = uni.upx2px(120)\n        this.fabBottomPx = safeBottom + fabExtra\n        this.cartBottomPx = safeBottom + panelExtra\n      } catch (e) {\n        // å…œåº•ï¼šæ— ç³»ç»Ÿä¿¡æ¯æ—¶ä½¿ç”¨å›ºå®šåç§»\n        this.fabBottomPx = uni.upx2px(180)\n        this.cartBottomPx = uni.upx2px(120)\n      }\n    },\n\n    // é”®ç›˜é¿è®©ï¼šå½“çª—å£é«˜åº¦æ˜¾è‘—ç¼©å°ï¼ˆæ¨æ–­é”®ç›˜å¼¹å‡ºï¼‰ï¼Œå°†æ¨¡æ€æ•´ä½“ä¸Šç§»\n    _updateModalShift() {\n      try {\n        const info = uni.getSystemInfoSync && uni.getSystemInfoSync()\n        const baseH = this._winH || (info && info.windowHeight) || 0\n        const curH = (info && info.windowHeight) || baseH\n        const shrink = Math.max(0, baseH - curH)\n        // è§†çª—é«˜åº¦å‡å°‘è¶…è¿‡ 80px è§†ä¸ºé”®ç›˜å¼¹å‡ºï¼ŒæŒ‰ç¼©å‡æ¯”ä¾‹ä¸Šç§»ä½†è®¾ç½®æœ€å¤§å€¼\n        const extra = shrink > 80 ? Math.min(uni.upx2px(200), shrink - 40) : 0\n        this.modalShiftPx = extra\n      } catch (e) {\n        this.modalShiftPx = 0\n      }\n    },\n    // æŒ‰ headHidePx æŠŠå®¹å™¨é¡¶åˆ°æ›´ä¸Šé¢ï¼ˆå®ç°é¡¶å‡ºå¤´éƒ¨çš„é”™è§‰ï¼‰\n    _applyTopOffset(windowTop, winH) {\n      const top = Math.max(0, Math.floor(windowTop || 0))\n      const h   = Math.max(0, Math.floor((winH || 0) - top))\n      this.containerTopPx    = top\n      this.containerHeightPx = h\n    },\n\n    // æ ¹æ®æ»šåŠ¨è¿›åº¦æ›´æ–°å¤´éƒ¨éšè—ä½ç§»ï¼Œå¹¶é‡æ–°åº”ç”¨ top/height\n    _handleHeadHideProgress(st) {\n      const prev = this._prevScrollTop || 0\n      const dy = st - prev\n      const abs = Math.abs(dy)\n\n      // è¿‡æ»¤æå°æŠ–åŠ¨ï¼Œå‡è½»ä¸ä¸æ»‘æ„Ÿè§‰\n      if (abs < 0.5) {\n        this._prevScrollTop = st\n        return\n      }\n\n      if (dy > 0) {\n        // ä¸Šæ»‘ï¼šéšè—å¤´éƒ¨ï¼ˆå¢åŠ  headHidePxï¼ŒåŠ å°‘è®¸é˜»å°¼ï¼‰\n        this.headHidePx = Math.min(this._headHideMaxPx, this.headHidePx + dy * 0.92)\n      } else if (dy < 0) {\n        // ä¸‹æ‹‰ï¼šéœ²å‡ºå¤´éƒ¨ï¼ˆå‡å°‘ headHidePxï¼‰ï¼Œåœ¨é¡¶éƒ¨å¿«é€Ÿå¤ä½ç¨åŠ å¼º\n        const k = (st <= 4) ? 1.3 : 1.0\n        this.headHidePx = Math.max(0, this.headHidePx + dy * k)\n      }\n\n      // é¡¶éƒ¨è½»å¾®å›å¼¹ï¼ˆå¹…åº¦å°ä¸€äº›ï¼‰\n      if (st <= 2) this.headHidePx = Math.max(0, this.headHidePx - 2)\n\n      // è¾¹ç•Œå¤¹å–\n      if (this.headHidePx > this._headHideMaxPx) this.headHidePx = this._headHideMaxPx\n      if (this.headHidePx < 0) this.headHidePx = 0\n\n      this._prevScrollTop = st\n      // æ³¨ï¼šå®¹å™¨çš„ top/height ä»…ç”±çª—å£å‚æ•°å†³å®šï¼›çœŸæ­£çš„â€œé¡¶å‡ºå¤´éƒ¨â€ç”± transform å®Œæˆ\n    },\n    // è®¡ç®—å®¹å™¨å’Œå³ä¾§åˆ—è¡¨çš„é«˜åº¦\n    _calcContainerAndListHeights() {\n      // æ¯æ¬¡ç°å–ä¸€æ¬¡ windowHeightï¼Œé¿å…æ—§ç¼“å­˜\n      let winH = 0, windowTop = 0\n      try {\n        const info = uni.getWindowInfo && uni.getWindowInfo()\n        if (info) {\n          winH = info.windowHeight || 0\n          windowTop = info.windowTop || 0 // â† å…³é”®ï¼šé¡¶éƒ¨ç³»ç»Ÿå ä½\n        }\n      } catch(e){}\n      if (!winH) {\n        try {\n          winH = (uni.getSystemInfoSync().windowHeight) || 0\n        } catch(e){}\n      }\n\n      const q = uni.createSelectorQuery().in(this)\n      q.select('.container').boundingClientRect()\n        .select('.right__title').boundingClientRect()\n        .exec((res) => {\n          const contRect = res && res[0]\n          const titleRect = res && res[1]\n\n          // è®¾ç½®å®¹å™¨ top/height åŸºçº¿ï¼ˆä¸ headHidePx æ— å…³ï¼‰ï¼›é¡¶å‡ºæ•ˆæœäº¤ç»™ transform\n          this._applyTopOffset(windowTop, winH)\n          this.containerFixed = true\n\n          const titleH = Math.max(48, (titleRect?.height ?? 56))\n          // 16rpx * 2 â†’ px\n          const rightPadV = Math.max(0, uni.upx2px(16) * 2)\n          let listH = Math.max(0, this.containerHeightPx - titleH - rightPadV)\n          // æç«¯æƒ…å†µä¸‹ç»™ä¸ªå…œåº•æœ€å°å€¼ï¼Œé¿å… scroll-view é«˜åº¦ä¸º 0\n          if (listH < 80) listH = 80\n          this.rightListHeightPx = Math.floor(listH)\n\n          console.log('é«˜åº¦è°ƒè¯•:', {\n            winH,\n            windowTop,\n            headHidePx: this.headHidePx,\n            containerTopPx: this.containerTopPx,\n            containerHeightPx: this.containerHeightPx,\n            contTop: contRect?.top,\n            contH: this.containerHeightPx,\n            titleH,\n            rightPadV,\n            listH: this.rightListHeightPx\n          })\n        })\n    },\n\n    // è®¡ç®—å³ä¾§scroll-viewçš„å›ºå®šé«˜åº¦ï¼ˆå…¼å®¹æ—§æ–¹æ³•ï¼‰\n    _calcRightListHeight() {\n      this._calcContainerAndListHeights()\n    },\n\n    /* -------- å…¨å±€è§¦æ‘¸äº‹ä»¶è½¬å‘æ–¹æ³• -------- */\n    onGlobalTouchMove(e) {\n      // æ­£åœ¨æ‹–æ‹½æ‰é˜»æ­¢ï¼›å¦åˆ™åˆ«æ‹¦ï¼Œä¿è¯ scroll-view æ­£å¸¸æ»šåŠ¨\n      if (this.isDragging) {\n        e.stopPropagation(); e.preventDefault()\n        this.onDragMove(e); return\n      }\n      // æ²¡åœ¨æ‹–æ‹½ï¼šæ£€æŸ¥æ˜¯å¦æ˜¯è¾¹ç¼˜æ»‘åŠ¨\n      const shouldPreventDefault = this.onEdgeTouchMove(e)\n      if (shouldPreventDefault) { e.stopPropagation(); e.preventDefault() }\n    },\n    onGlobalTouchEnd(e) {\n      if (this.isDragging) {\n        e.stopPropagation(); e.preventDefault()\n        this.onDragEnd(e); return\n      }\n      // åªæœ‰åœ¨è¾¹ç¼˜æ»‘åŠ¨è·Ÿè¸ªçŠ¶æ€ä¸‹æ‰é˜»æ­¢é»˜è®¤è¡Œä¸º\n      if (this.swipe.tracking) { e.stopPropagation(); e.preventDefault() }\n      this.onEdgeTouchEnd(e)\n    },\n    onGlobalTouchCancel(e) {\n      if (this.isDragging) {\n        e.stopPropagation(); e.preventDefault()\n        this.onDragCancel(); return\n      }\n      // åªæœ‰åœ¨è¾¹ç¼˜æ»‘åŠ¨è·Ÿè¸ªçŠ¶æ€ä¸‹æ‰é˜»æ­¢é»˜è®¤è¡Œä¸º\n      if (this.swipe.tracking) { e.stopPropagation(); e.preventDefault() }\n      this.cancelDrawerDrag()\n    },\n\n    /* -------- å®‰å…¨å·¥å…·æ–¹æ³• -------- */\n    // å®‰å…¨è·å–æ•°ç»„\n    getListSafe(list) { return Array.isArray(list) ? list : [] },\n    // å®‰å…¨è·å–ID\n    getIdSafe(obj) { return obj && typeof obj === 'object' ? obj.id : undefined },\n\n    // âœ… è®°å½•æ˜¯å¦å‘ç”Ÿè¿‡çœŸå®ç”¨æˆ·æ‰‹åŠ¿ï¼ˆç”¨äºæŸäº›ç¯å¢ƒçš„é¢å¤–ä¿é™©ï¼‰\n    ensureUserGestureFlag() { if (!this._userInteracted) this._userInteracted = true },\n\n    // âœ… åªåœ¨ã€Œå½“å‰è°ƒç”¨æ ˆç¡®å®šä¸ºç”¨æˆ·æ‰‹åŠ¿ã€æ—¶è°ƒç”¨å®ƒï¼ˆä¸è¦åŒ… setTimeout/rAFï¼‰\n    vibrateNow(ms = 12) {\n      try {\n        // #ifdef H5\n        if (typeof navigator !== 'undefined' && navigator.vibrate && this._userInteracted) {\n          navigator.vibrate(ms)\n        }\n        // #endif\n      } catch (e) { /* no-op */ }\n    },\n\n    /* -------- å³ä¾§æŠ½å±‰ï¼ˆå³ç¼˜å·¦æ»‘è§¦å‘ï¼‰ -------- */\n    onEdgeTouchStart(e) {\n      this._axisStart(e) // æ–°å¢ï¼šå¯åŠ¨æ¨ªå‘æ»‘åŠ¨è¯†åˆ«ï¼ˆæ’é™¤å³ç¼˜30pxï¼‰\n      const t = e.touches && e.touches[0]; if (!t) return\n      const x = t.clientX, y = t.clientY\n      let screenWidth = 0\n      try { screenWidth = uni.getWindowInfo().windowWidth } catch(e){}\n      if (!screenWidth) {\n        uni.getSystemInfo({\n          success: (info) => {\n            screenWidth = info.windowWidth || 375\n            if (x >= screenWidth - 30 && !this.drawerOpen) {\n              this.swipe = { tracking: true, startX: x, startY: y, lastX: x }\n              this.drawerDragging = true\n            }\n          }\n        })\n        return\n      }\n      // æ”¹ä¸ºå³ä¾§è¾¹ç¼˜è§¦å‘ï¼ˆè·ç¦»å³è¾¹ç¼˜30pxå†…ï¼‰\n      if (x >= screenWidth - 30 && !this.drawerOpen) {\n        this.swipe = { tracking: true, startX: x, startY: y, lastX: x }\n        this.drawerDragging = true\n      }\n    },\n    onEdgeTouchMove(e) {\n      if (this.isDragging) return false // æ‹–æ‹½ä¼˜å…ˆï¼Œä¸å¤„ç†è¾¹ç¼˜æ»‘åŠ¨\n      // å…ˆå°è¯•è¯†åˆ«\"æ¨ªå‘æ¢æ \"\n      const consumed = this._axisMove(e)\n      if (consumed) { return true }\n      // é˜»æ­¢é»˜è®¤æ»šåŠ¨ï¼Œé¿å…æŠ–åŠ¨\n      if (!this.swipe.tracking) return false // æ²¡æœ‰åœ¨è·Ÿè¸ªæ»‘åŠ¨ï¼Œä¸éœ€è¦é˜»æ­¢é»˜è®¤è¡Œä¸º\n\n      const t = e.touches && e.touches[0]; if (!t) return false\n      const x = t.clientX, y = t.clientY\n      const dy = Math.abs(y - this.swipe.startY)\n      if (dy > 30 && !this.drawerOpen) { this.cancelDrawerDrag(); return false }\n\n      let dx = this.swipe.startX - x // å·¦æ»‘ä¸ºæ­£å€¼\n      if (!this.drawerOpen) {\n        let right = -this.drawerWidthPx + dx\n        if (right > 0) right = 0\n        if (right < -this.drawerWidthPx) right = -this.drawerWidthPx\n        this.drawerRightPx = right\n      } else {\n        let right = -dx\n        if (right > 0) right = 0\n        if (right < -this.drawerWidthPx) right = -this.drawerWidthPx\n        this.drawerRightPx = right\n      }\n      this.swipe.lastX = x\n      return true // æ­£åœ¨å¤„ç†è¾¹ç¼˜æ»‘åŠ¨ï¼Œéœ€è¦é˜»æ­¢é»˜è®¤è¡Œä¸º\n    },\n    onEdgeTouchEnd() {\n      if (this.isDragging) return // ç»“æŸäº¤ç»™ onGlobalTouchEnd é‡Œçš„æ‹–æ‹½åˆ†æ”¯\n      this._axisEnd() // æ–°å¢ï¼šæ”¶å°¾æ¨ªæ»‘æ‰‹åŠ¿\n      if (!this.swipe.tracking) return\n      const dx = this.swipe.startX - this.swipe.lastX // å·¦æ»‘ä¸ºæ­£å€¼\n      const threshold = this.drawerWidthPx * 0.35\n      if (!this.drawerOpen) {\n        if (dx > threshold) this.openDrawer()\n        else this.closeDrawer()\n      } else {\n        if (dx > threshold) this.closeDrawer()\n        else this.openDrawer()\n      }\n      this.cancelDrawerDrag()\n    },\n    cancelDrawerDrag() {\n      this.swipe.tracking = false; this.drawerDragging = false\n      this.axisSwipe.tracking = false; this.axisSwipe.consumed = false\n    },\n\n    /* -------- æ¨ªå‘æ¢æ æ‰‹åŠ¿ï¼šå¯åŠ¨/ç§»åŠ¨/ç»“æŸ -------- */\n    _axisStart(e) {\n      if (this.isDragging || this.drawerDragging) return\n      const t = this._firstTouch(e)\n      // å³ä¾§ 30px ä¿ç•™ç»™æŠ½å±‰ï¼Œä¸åšæ¢æ æ‰‹åŠ¿\n      let screenWidth = 0\n      try { screenWidth = uni.getWindowInfo().windowWidth } catch(e){ screenWidth = 375 }\n      if (t.clientX >= screenWidth - 30) return // äº¤ç»™æŠ½å±‰\n\n      this.axisSwipe = {\n        tracking: true, startX: t.clientX, startY: t.clientY,\n        lastX: t.clientX, consumed: false\n      }\n    },\n    _axisMove(e) {\n      if (!this.axisSwipe.tracking || this.drawerDragging || this.isDragging) return false\n      const t = this._firstTouch(e)\n      const dx = t.clientX - this.axisSwipe.startX\n      const dy = t.clientY - this.axisSwipe.startY\n      this.axisSwipe.lastX = t.clientX\n\n      // æ°´å¹³ä¸»å¯¼ä¸”ä½ç§»è¶³å¤Ÿæ—¶ï¼Œè®¤ä¸ºè¦æ¢æ \n      const H_THRESH = 60 // è§¦å‘é˜ˆå€¼\n      if (!this.axisSwipe.consumed && Math.abs(dx) > H_THRESH && Math.abs(dx) > Math.abs(dy) * 1.2) {\n        // è§¦å‘ä¸€æ¬¡æ¢æ äº‹ä»¶ï¼šå‘çˆ¶ç»„ä»¶å‘å‡º prev/next\n        const dir = dx > 0 ? 'prev' : 'next'\n        this.$emit('swipe-tab', dir)\n        this.axisSwipe.consumed = true\n        return true // å‘Šè¯‰ä¸Šå±‚å¯ä»¥é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼ˆé¿å…é¡µé¢æŠ–åŠ¨ï¼‰\n      }\n      return false\n    },\n    _axisEnd(/* e */) {\n      // æ”¶å°¾\n      this.axisSwipe.tracking = false\n      this.axisSwipe.consumed = false\n    },\n\n    openDrawer(){ this.drawerOpen = true; this.drawerRightPx = 0 },\n    closeDrawer(){ this.drawerOpen = false; this.drawerRightPx = -this.drawerWidthPx },\n\n    /* -------- åˆ—è¡¨ä¸åˆ†ç±» -------- */\n    onLeftScroll(e) {\n      const st = (e && e.detail && typeof e.detail.scrollTop === 'number') ? e.detail.scrollTop : 0;\n      // é¡¶éƒ¨åˆ¤æ–­ï¼ˆä¿ç•™åŸæœ‰äº‹ä»¶ï¼‰\n      this.$emit('left-top', st <= 2)\n      // æ–°å¢ï¼šæ»šåŠ¨è¿›åº¦ï¼Œä¾›é¦–é¡µæŒ‰è¿›åº¦éšè—å¤´éƒ¨\n      this.$emit('scroll-y', st)\n      // é©±åŠ¨å¤´éƒ¨éšè—ä½ç§»\n      this._handleHeadHideProgress(st)\n    },\n    selectCategory(c) {\n      this.selectedCategory = c\n      // é€‰æ‹©åˆ†ç±»æ—¶ç¡®ä¿åˆ†ç»„å­˜åœ¨\n      this.ensureGroup(this.nid, c && c.name ? c.name : '')\n      // åˆ‡æ¢åˆ†ç±»æ—¶å¤ä½å¤´éƒ¨éšè—çŠ¶æ€ï¼Œä½“éªŒæ›´ä¸æ»‘\n      this.headHidePx = 0\n      this._prevScrollTop = 0\n      // é‡æ–°åº”ç”¨å®¹å™¨ä½ç½®ä¸é«˜åº¦\n      try {\n        const info = uni.getWindowInfo && uni.getWindowInfo()\n        const winH = (info && info.windowHeight) || (uni.getSystemInfoSync().windowHeight) || 0\n        const windowTop = (info && info.windowTop) || 0\n        this._applyTopOffset(windowTop, winH)\n      } catch(e){}\n    },\n\n    /* -------- è½¦é—´ä»“æ•°é‡è®¡ç®—ï¼šä¸»æä»“å‡ºåº“ - BOMéœ€æ±‚ -------- */\n    calculateWorkshopQuantity(materialCode) {\n      const outboundToProduction = this.outboundRecords\n        .filter(r => r.materialCode === materialCode && r.fromWarehouse === 'main' && this.productionDepartments.some(d => d.code === r.toDepartment))\n        .reduce((s, r) => s + r.quantity, 0)\n      const bomRequired = this.bomRequirements\n        .filter(req => req.materialCode === materialCode)\n        .reduce((s, req) => s + req.requiredQuantity, 0)\n      return outboundToProduction - bomRequired // å¯ä¸ºè´Ÿ\n    },\n    getMaterialCalculationDetails(materialCode) {\n      const outboundRecords = this.outboundRecords\n        .filter(r => r.materialCode === materialCode && r.fromWarehouse === 'main' && this.productionDepartments.some(d => d.code === r.toDepartment))\n      const bomRequirements = this.bomRequirements.filter(req => req.materialCode === materialCode)\n      const totalOutbound = outboundRecords.reduce((s, r) => s + r.quantity, 0)\n      const totalRequired = bomRequirements.reduce((s, r) => s + r.requiredQuantity, 0)\n      return { outboundRecords, bomRequirements, totalOutbound, totalRequired, finalQuantity: totalOutbound - totalRequired }\n    },\n    showCalculationDetail(material) {\n      this.selectedMaterialForCalc = material\n      this.calculationDetails = this.getMaterialCalculationDetails(material.code)\n      this.showCalculationModal = true\n    },\n    closeCalculationModal() {\n      this.showCalculationModal = false\n      this.selectedMaterialForCalc = null\n      this.calculationDetails = { outboundRecords: [], bomRequirements: [], totalOutbound: 0, totalRequired: 0, finalQuantity: 0 }\n    },\n    getDepartmentName(code) {\n      const d = this.productionDepartments.find(x => x.code === code); return d ? d.name : code\n    },\n    getDepartmentNameByCode(code) {\n      const d = this.productionDepartments.find(x => x.code === code); return d ? d.name : code\n    },\n\n    /* -------- æ‰¹é‡å‡ºåº“åŠŸèƒ½ -------- */\n    showBatchOutboundModal(){ this.showBatchOutboundDialog = true },\n    closeBatchOutboundModal(){\n      this.showBatchOutboundDialog = false\n      this.selectedBatch = null\n      this.selectedOutboundDepartment = null\n      this.outboundPreview = []\n    },\n    selectOutboundDepartment(dept){\n      this.selectedOutboundDepartment = dept\n      this.outboundPreview = [] // éƒ¨é—¨é€‰æ‹©åä¸è‡ªåŠ¨ç”Ÿæˆé¢„è§ˆï¼Œç­‰å¾…æ‰¹å·é€‰æ‹©\n    },\n    selectBatch(batch){\n      if (batch.used) return // å·²å‡ºåº“çš„æ‰¹å·ä¸èƒ½é€‰æ‹©\n      this.selectedBatch = batch\n      this.generateOutboundPreview()\n    },\n    generateOutboundPreview(){\n      if (!this.selectedBatch || !this.selectedOutboundDepartment) return\n      // æ ¹æ®é€‰ä¸­çš„æ‰¹å·å’Œéƒ¨é—¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„BOMææ–™\n      const bomGroup = this.groups.find(g => g.title === this.selectedBatch.name)\n      if (!bomGroup) return\n      // ç­›é€‰å‡ºå±äºé€‰ä¸­éƒ¨é—¨çš„ææ–™\n      const deptMaterials = bomGroup.materials.filter(m => m.department === this.selectedOutboundDepartment.code)\n      this.outboundPreview = deptMaterials.map(m => {\n        // è·å–è½¦é—´ä»“å¯¹åº”ææ–™çš„æ•°é‡\n        const workshopQuantity = this.getWorkshopQuantity(m.code)\n        return {\n          materialCode: m.code,\n          materialName: m.name,\n          workshopQuantity: workshopQuantity,\n          outboundQuantity: m.quantity // BOMä¸­å®šä¹‰çš„æ•°é‡ä½œä¸ºå‡ºåº“é‡\n        }\n      })\n    },\n    getWorkshopQuantity(materialCode){ return this.calculateWorkshopQuantity(materialCode) },\n    confirmBatchOutbound(){\n      if (!this.canConfirmOutbound) return\n      // æ•°æ®åŠ å…¥è´­ç‰©è½¦ï¼Œç­‰å¾…ç­¾å­—ç»“ç®—\n      this.outboundPreview.forEach(item => {\n        this.cartList.push({\n          id: Date.now() + Math.random(),\n          code: item.materialCode,\n          name: item.materialName,\n          delta: -item.outboundQuantity,\n          type: 'outbound',\n          quantity: item.outboundQuantity,\n          timestamp: Date.now(),\n          meta: {\n            batchNumber: this.selectedBatch.name,\n            department: this.selectedOutboundDepartment.code,\n            departmentName: this.selectedOutboundDepartment.name,\n            operationType: 'batch_outbound'\n          }\n        })\n      })\n      // æ ‡è®°æ‰¹å·ä¸ºå·²ä½¿ç”¨\n      this.usedBatches.push(this.selectedBatch.name)\n      this.saveCartList()\n      uiUtils.showSuccess('å·²åŠ å…¥å‡ºåº“æ¸…å•ğŸ›’')\n      this.closeBatchOutboundModal()\n      this.openCart()\n    },\n\n    // é‡ç½®æ‹–æ‹½çŠ¶æ€ï¼ˆå·²è¢«_resetDragæ›¿ä»£ï¼Œä¿ç•™å…¼å®¹æ€§ï¼‰\n    resetDragState() {\n      console.log('é‡ç½®æ‹–æ‹½çŠ¶æ€ï¼ˆæ—§æ–¹æ³•ï¼‰')\n      this._resetDrag()\n      // é¡µé¢åˆ‡æ¢/å¤ä½æ—¶æŠŠå¤´éƒ¨å¼¹å›\n      this.headHidePx = 0\n      this._prevScrollTop = 0\n    },\n\n    // åˆ é™¤æ‹–æ‹½çš„åˆ†ç±»\n    deleteDraggedCategory() {\n      if (!this.dragItem) return\n      uni.showModal({\n        title: 'ç¡®è®¤åˆ é™¤',\n        content: `ç¡®å®šè¦åˆ é™¤åˆ†ç±»\"${this.dragItem.name}\"åŠå…¶æ‰€æœ‰ææ–™å—ï¼Ÿ`,\n        success: (res) => {\n          // é˜²ç©ºæ£€æŸ¥ï¼šç”¨æˆ·å¯èƒ½ç‚¹äº†å–æ¶ˆ\n          if (!res || !res.confirm) return\n          // æ£€æŸ¥æ‹–æ‹½é¡¹æ˜¯å¦æœ‰æ•ˆ\n          if (!this.dragItem || this.getIdSafe(this.dragItem) == null) return\n\n          const categoryId = this.dragItem.id\n          const categoryName = this.dragItem.name\n\n          // å®‰å…¨åˆ é™¤åˆ†ç±» - ä¿®å¤ï¼šæ“ä½œæºæ•°æ®è€Œéè®¡ç®—å±æ€§\n          const list = this.tabCategories[this.nid] || []\n          const categoryIndex = list.findIndex(c => c && c.id === categoryId)\n          if (categoryIndex !== -1) {\n            list.splice(categoryIndex, 1) // ä¿®å¤ï¼šæ“ä½œæºæ•°æ®\n            // åˆ é™¤å¯¹åº”çš„materialsç»„\n            const groups = this.getListSafe(this.groups)\n            const groupIndex = groups.findIndex(g => g && g.title === categoryName)\n            if (groupIndex !== -1) { this.groups.splice(groupIndex, 1) }\n            // å¦‚æœåˆ é™¤çš„æ˜¯å½“å‰é€‰ä¸­çš„åˆ†ç±»ï¼Œæ¸…ç©ºé€‰æ‹©\n            if (this.selectedCategory && this.selectedCategory.id === categoryId) {\n              this.selectedCategory = null\n            }\n            uiUtils.showSuccess('åˆ é™¤æˆåŠŸ')\n          }\n        }\n      })\n    },\n\n    // åˆ é™¤æ‹–æ‹½çš„ææ–™\n    deleteDraggedMaterial() {\n      if (!this.dragItem || !this.selectedCategory) return\n      uni.showModal({\n        title: 'ç¡®è®¤åˆ é™¤',\n        content: `ç¡®å®šè¦åˆ é™¤ææ–™\"${this.dragItem.name || this.dragItem.code}\"å—ï¼Ÿ`,\n        success: (res) => {\n          // é˜²ç©ºæ£€æŸ¥ï¼šç”¨æˆ·å¯èƒ½ç‚¹äº†å–æ¶ˆ\n          if (!res || !res.confirm) return\n\n          // æ£€æŸ¥æ‹–æ‹½é¡¹å’Œé€‰ä¸­åˆ†ç±»æ˜¯å¦æœ‰æ•ˆ\n          if (!this.dragItem || this.getIdSafe(this.dragItem) == null) return\n          if (!this.selectedCategory || !this.selectedCategory.name) return\n\n          const materialId = this.dragItem.id\n          const categoryName = this.selectedCategory.name\n\n          // å®‰å…¨æŸ¥æ‰¾å¹¶åˆ é™¤ææ–™\n          const groups = this.getListSafe(this.groups)\n          const group = groups.find(g => g && g.title === categoryName)\n          if (!group) return\n          const materials = this.getListSafe(group.materials)\n          const materialIndex = materials.findIndex(m => m && m.id === materialId)\n          if (materialIndex !== -1) {\n            group.materials.splice(materialIndex, 1)\n            uiUtils.showSuccess('åˆ é™¤æˆåŠŸ')\n          }\n        }\n      })\n    },\n\n    // åˆ é™¤åŠ¨ä½œï¼ˆå¤šé€‰ï¼‰\n    deleteSelectedCategories() {\n      const selectedList = this.getListSafe(this.selectedCategories)\n      if (selectedList.length === 0) return uiUtils.showToast('è¯·å…ˆé€‰æ‹©è¦åˆ é™¤çš„åˆ†ç±»')\n\n      uni.showModal({\n        title: 'ç¡®è®¤åˆ é™¤',\n        content: `ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${selectedList.length} ä¸ªå¤§ç±»åŠå…¶æ‰€æœ‰ææ–™å—ï¼Ÿ`,\n        success: (res) => {\n          if (!res || !res.confirm) return\n          const categories = this.getListSafe(this.categories)\n          const groups = this.getListSafe(this.groups)\n          selectedList.forEach(categoryId => {\n            if (categoryId == null) return\n            const category = categories.find(c => c && c.id === categoryId)\n            if (!category) return\n            // åˆ é™¤å¯¹åº”çš„ç»„\n            const groupIndex = groups.findIndex(g => g && g.title === category.name)\n            if (groupIndex !== -1) { this.groups.splice(groupIndex, 1) }\n            // åˆ é™¤æ ‡ç­¾é¡µä¸­çš„åˆ†ç±»\n            const tabCats = this.getListSafe(this.tabCategories[this.nid] || this.tabCategories[0])\n            const categoryIndex = tabCats.findIndex(c => c && c.id === categoryId)\n            if (categoryIndex !== -1) { tabCats.splice(categoryIndex, 1) }\n          })\n          this.selectedCategories = []\n          // é‡æ–°é€‰æ‹©ç¬¬ä¸€ä¸ªåˆ†ç±»\n          const remainingCats = this.getListSafe(this.tabCategories[this.nid] || this.tabCategories[0])\n          this.selectedCategory = remainingCats[0] || null\n          uiUtils.showSuccess('åˆ é™¤æˆåŠŸ')\n        }\n      })\n    },\n\n    deleteSelectedMaterials() {\n      const selectedList = this.getListSafe(this.selectedMaterials)\n      if (selectedList.length === 0) return uiUtils.showToast('è¯·å…ˆé€‰æ‹©è¦åˆ é™¤çš„ææ–™')\n\n      uni.showModal({\n        title:'ç¡®è®¤åˆ é™¤',\n        content: `ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${selectedList.length} ä¸ªææ–™å—ï¼Ÿ`,\n        success: (res) => {\n          if (!res || !res.confirm) return\n          const groups = this.getListSafe(this.groups)\n          selectedList.forEach(materialId => {\n            if (materialId == null) return\n            groups.forEach(group => {\n              if (!group || !group.materials) return\n              const materials = this.getListSafe(group.materials)\n              const materialIndex = materials.findIndex(m => m && m.id === materialId)\n              if (materialIndex !== -1) { group.materials.splice(materialIndex, 1) }\n            })\n          })\n          this.selectedMaterials = []\n          uiUtils.showSuccess('åˆ é™¤æˆåŠŸ')\n        }\n      })\n    },\n\n    /* -------- å…¥/å‡ºåº“ -> åŠ å…¥è´­ç‰©è½¦ -------- */\n    openQty(type, m) { this.opType = type; this.opMat = m; this.qtyStr = ''; this.qtyDialog = true },\n    closeQty() { this.qtyDialog = false; this.qtyStr = '' },\n    confirmQty(data) {\n      const q = Number(data.quantity)\n      if (!q || q <= 0) return uiUtils.showToast('è¯·è¾“å…¥æœ‰æ•ˆæ•°é‡')\n      const delta = this.opType === 'in' ? q : -q\n      this.cartList.push({\n        id: Date.now(),\n        code: this.opMat.code,\n        name: this.opMat.name || this.opMat.code,\n        delta,\n        type: (this.opType === 'in' ? 'inbound' : 'outbound'),\n        quantity: q,\n        timestamp: Date.now(),\n        meta: { outboundType: this.outboundType }\n      })\n      this.saveCartList(); this.qtyDialog = false; this.qtyStr = ''\n      uiUtils.showToast('å·²åŠ å…¥æ¸…å•')\n    },\n\n    openCart(){ this._updateFloatingOffsets(); this.cartOpen = true },\n    closeCart(){ this.cartOpen = false },\n    removeCartItem(id){ this.cartList = this.cartList.filter(x => x.id !== id); this.saveCartList(); if (!this.cartList.length) this.cartOpen = false },\n    clearCart(){ this.cartList = []; this.saveCartList(); this.cartOpen = false },\n    checkout(){\n      if (!this.cartList.length) return uiUtils.showToast('æ¸…å•ä¸ºç©º')\n      // è¿™é‡Œä»…æ¼”ç¤ºï¼šæŠŠè´­ç‰©è½¦å¸¦åˆ°ç»“ç®—é¡µ\n      const cartData = this.cartList.map(it => ({\n        id: it.id, materialCode: it.code, materialName: it.name,\n        type: it.type, quantity: it.quantity, timestamp: it.timestamp, meta: it.meta\n      }))\n      uni.setStorageSync('cartList', cartData)\n      this.cartOpen = false\n      uni.navigateTo({ url:'/pages/checkout/checkout' })\n    },\n\n    editMaterial(m){ uiUtils.showToast('ç¼–è¾‘ææ–™: ' + m.code) },\n    deleteMaterial(m){\n      if (!m || this.getIdSafe(m) == null) { uiUtils.showToast('ææ–™ä¿¡æ¯æ— æ•ˆ'); return }\n      const materialId = m.id; const materialName = m.name || m.code || 'æœªçŸ¥ææ–™'\n      uni.showModal({\n        title: 'ç¡®è®¤åˆ é™¤',\n        content: `ç¡®å®šè¦åˆ é™¤ææ–™\"${materialName}\"å—ï¼Ÿ`,\n        success: (res) => {\n          if (!res || !res.confirm) return\n          const groups = this.getListSafe(this.groups)\n          let deleted = false\n          for (let group of groups) {\n            if (!group || !group.materials) continue\n            const materials = this.getListSafe(group.materials)\n            const index = materials.findIndex(material => material && material.id === materialId)\n            if (index !== -1) {\n              group.materials.splice(index, 1)\n              uiUtils.showSuccess('ææ–™åˆ é™¤æˆåŠŸ')\n              deleted = true\n              break\n            }\n          }\n          if (!deleted) uiUtils.showToast('æœªæ‰¾åˆ°è¦åˆ é™¤çš„ææ–™')\n        }\n      })\n    },\n\n    loadCartList(){ this.cartList = uni.getStorageSync('cartList') || [] },\n    saveCartList(){ uni.setStorageSync('cartList', this.cartList) },\n\n    /* -------- æ–°å¢åˆ†ç±»/ææ–™ -------- */\n    handleAddMaterial(){ this._updateModalShift(); this.showAddMaterialModal = true },\n    showAddCategoryDialog(){ this._updateModalShift(); this.showAddCategoryModal = true; this.newCategoryName = '' },\n    showAddMaterialDialog(){ this._updateModalShift(); this.showAddMaterialModal = true; this.resetNewMaterial() },\n    closeAddCategoryModal(){ this.showAddCategoryModal = false; this.newCategoryName = '' },\n    confirmAddCategory(){\n      if (!this.newCategoryName.trim()) return uiUtils.showToast('è¯·è¾“å…¥åç§°')\n      if (!this.tabCategories[this.nid]) this.tabCategories[this.nid] = []\n      const list = this.tabCategories[this.nid]\n      const maxId = Math.max(...list.map(c => c.id), 0)\n      const nc = { id: maxId + 1, name: this.newCategoryName.trim() }\n      this.tabCategories[this.nid].push(nc)\n      this.groups.push({ scope: this.nid, title: nc.name, materials: [] })\n      uiUtils.showSuccess('æ·»åŠ æˆåŠŸ')\n      this.closeAddCategoryModal()\n      this.selectedCategory = nc\n    },\n    closeAddMaterialModal(){ this.showAddMaterialModal = false; this.resetNewMaterial() },\n    resetNewMaterial(){ this.newMaterial = { code: '', name: '', quantity: 0, batch: '', spec: '' } },\n    confirmAddMaterial(){\n      if (!this.newMaterial.code.trim()) return uiUtils.showToast('è¯·å¡«å†™ææ–™ç¼–ç ')\n      const exist = this.groups.find(g => g.materials.some(m => m.code === this.newMaterial.code.trim()))\n      if (exist) return uiUtils.showToast('ææ–™ç¼–ç å·²å­˜åœ¨')\n\n      // è‹¥å½“å‰åˆ†ç±»å¯¹åº”åˆ†ç»„ä¸å­˜åœ¨åˆ™æ‡’åˆ›å»º\n      this.ensureGroup(this.nid, this.selectedCategory ? this.selectedCategory.name : '')\n      const group = this.findGroupByTabAndTitle(this.nid, this.selectedCategory ? this.selectedCategory.name : '')\n      if (group) {\n        const all = this.groups.flatMap(g => g.materials)\n        const maxId = Math.max.apply(null, all.map(m => m.id).concat([0]))\n        group.materials.push({\n          id: maxId + 1,\n          code: this.newMaterial.code.trim(),\n          name: this.newMaterial.name.trim() || this.newMaterial.code.trim(),\n          quantity: parseInt(this.newMaterial.quantity) || 0,\n          batch: this.newMaterial.batch.trim() || '-',\n          spec: this.newMaterial.spec.trim() || '-'\n        })\n        uiUtils.showSuccess('ææ–™æ·»åŠ æˆåŠŸ')\n        this.closeAddMaterialModal()\n      }\n    },\n\n    // ç¡®ä¿æŒ‡å®š scope+title çš„åˆ†ç»„å­˜åœ¨ï¼ˆæ‡’åˆ›å»ºï¼‰\n    ensureGroup(scope, title) {\n      if (!title) return\n      const groups = Array.isArray(this.groups) ? this.groups : []\n      const exists = groups.some(g => g && g.scope === scope && g.title === title)\n      if (!exists) {\n        this.groups.push({ scope, title, materials: [] })\n      }\n    },\n    // ç¡®ä¿æŸä¸ªæ ‡ç­¾é¡µçš„æ‰€æœ‰åˆ†ç±»åˆ†ç»„å­˜åœ¨ï¼ˆæ‡’åˆ›å»ºï¼‰\n    ensureGroupsForTab(scope) {\n      const cats = this.tabCategories[scope] || []\n      cats.forEach(cat => {\n        if (cat && cat.name) this.ensureGroup(scope, cat.name)\n      })\n    },\n\n    /* -------- æ™ºèƒ½æŒ‰é’®å¤„ç† -------- */\n    handleSmartAction(){\n      const config = this.smartButtonConfig\n      if (config.action === 'upload') this.handleBomUpload()\n      else this.showAddMaterialDialog()\n    },\n\n    // BOMæ çš„ä¸Šä¼ åŠŸèƒ½\n    handleBomUpload(){\n      // æ£€æŸ¥å¹³å°ï¼ŒH5ç¯å¢ƒä½¿ç”¨ä¸åŒçš„ä¸Šä¼ æ–¹å¼\n      // #ifdef H5\n      const input = document.createElement('input')\n      input.type = 'file'\n      input.accept = '.xls,.xlsx,.csv'\n      input.onchange = (e) => {\n        const file = e.target.files[0]\n        if (file) {\n          this.uploadBomFile({\n            path: window.URL.createObjectURL(file),\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            file: file // ä¿å­˜åŸå§‹Fileå¯¹è±¡\n          })\n        }\n      }\n      input.click()\n      // #endif\n\n      // #ifndef H5\n      uni.chooseMessageFile({\n        count: 1, type: 'file', extension: ['xls', 'xlsx', 'csv'],\n        success: (res) => {\n          const file = (res.tempFiles && res.tempFiles[0]) || null\n          if (file) { this.uploadBomFile(file) }\n        },\n        fail: () => { uiUtils.showToast('æœªé€‰æ‹©æ–‡ä»¶') }\n      })\n      // #endif\n    },\n\n    // ä¸Šä¼ BOMæ–‡ä»¶åˆ°æœåŠ¡å™¨\n    async uploadBomFile(file){\n      uni.showLoading({ title: 'ä¸Šä¼ ä¸­...' })\n      try {\n        let uploadResult;\n        // #ifdef H5\n        const fd = new FormData()\n        fd.append('file', file.file) // åŸå§‹ File å¯¹è±¡\n        fd.append('source', 'bom-import')\n        fd.append('category', this.selectedCategory ? this.selectedCategory.name : '')\n        const resp = await fetch('https://your-api.example.com/bom/upload', { method: 'POST', body: fd })\n        if (!resp.ok) throw new Error('ç½‘ç»œé”™è¯¯')\n        uploadResult = await resp.json()\n        // #endif\n\n        // #ifndef H5\n        uploadResult = await new Promise((resolve, reject) => {\n          uni.uploadFile({\n            url: 'https://your-api.example.com/bom/upload', // æ›¿æ¢ä¸ºå®é™…çš„ä¸Šä¼ åœ°å€\n            filePath: file.path || file.tempFilePath,\n            name: 'file',\n            formData: { source: 'bom-import', category: this.selectedCategory ? this.selectedCategory.name : '' },\n            success: resolve, fail: reject\n          })\n        })\n        // #endif\n\n        uni.hideLoading()\n        uiUtils.showSuccess('BOMæ–‡ä»¶ä¸Šä¼ æˆåŠŸ')\n        this.refreshCurrentCategory()\n      } catch (error) {\n        uni.hideLoading()\n        console.error('ä¸Šä¼ å¤±è´¥:', error)\n        uiUtils.showToast('ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•')\n      }\n    },\n\n    // åˆ·æ–°å½“å‰åˆ†ç±»çš„æ•°æ® - å·²åˆå¹¶é‡ç®—é«˜åº¦é€»è¾‘\n    refreshCurrentCategory(){\n      uiUtils.showToast('æ•°æ®å·²åˆ·æ–°')\n      this.$nextTick(() => { this._calcContainerAndListHeights() })\n    },\n\n    // æ‰¹é‡ä¸‹è½½åŠŸèƒ½\n    handleBatchDownload(){\n      let downloadType = ''\n      if (this.nid === 0) downloadType = 'ä¸»æä»“'\n      else if (this.nid === 1) downloadType = 'è½¦é—´ä»“'\n      else if (this.nid === 3) downloadType = 'PACK'\n\n      uni.showLoading({ title: 'å‡†å¤‡ä¸‹è½½...' })\n      // å‡†å¤‡ä¸‹è½½æ•°æ®\n      const downloadData = this.prepareDownloadData()\n      setTimeout(() => {\n        uni.hideLoading()\n        uni.showModal({\n          title: 'ä¸‹è½½æˆåŠŸ',\n          content: `å·²æˆåŠŸä¸‹è½½${downloadType}æ•°æ®ï¼Œå…±${downloadData.length}æ¡è®°å½•`,\n          showCancel: false\n        })\n      }, 1000)\n    },\n\n    // å‡†å¤‡ä¸‹è½½æ•°æ®\n    prepareDownloadData(){\n      let data = []\n      if (this.selectedCategory) {\n        const g = this.findGroupByTabAndTitle(this.nid, this.selectedCategory.name)\n        if (g && g.materials) {\n          data = g.materials.map(m => ({\n            code: m.code, name: m.name || '', quantity: m.quantity || 0,\n            batch: m.batch || '-', spec: m.spec || '-',\n            department: this.nid === 2 ? this.getDepartmentNameByCode(m.department) : ''\n          }))\n        }\n      } else {\n        const tabGroups = this.groups.filter((g, i) => {\n          const cats = this.tabCategories[this.nid] || []\n          return cats.some(c => c.name === g.title)\n        })\n        data = tabGroups\n          .flatMap(g => g.materials || [])\n          .map(m => ({\n            code: m.code, name: m.name || '', quantity: m.quantity || 0,\n            batch: m.batch || '-', spec: m.spec || '-',\n            department: this.nid === 2 ? this.getDepartmentNameByCode(m.department) : ''\n          }))\n      }\n      return data\n    },\n\n    /* -------- æŒ‰BOMæ‰¹é‡å‘æ–™ -> åŠ å…¥è´­ç‰©è½¦ -------- */\n    showBatchIssueModal(){ this.showBatchIssueDialog = true },\n    closeBatchIssueModal(){ this.showBatchIssueDialog = false; this.selectedDepartment = null; this.selectedBom = null; this.batchQuantity = 1; this.issuePreview = []; this.outboundType = '' },\n    selectDepartment(d){ this.selectedDepartment = d; this.selectedBom = null; this.issuePreview = [] },\n    selectBom(b){ this.selectedBom = b; this.generateIssuePreview() },\n    findGroupByTabAndTitle(scope, title) { return this.groups.find(g => g && g.scope === scope && g.title === title) || null },\n    findMainWarehouseMaterialByCode(code) {\n      const mainCatNames = (this.tabCategories[0] || []).map(c => c.name)\n      for (const g of this.groups) {\n        if (mainCatNames.includes(g.title)) {\n          const m = g.materials.find(x => x.code === code); if (m) return m\n        }\n      }\n      return null\n    },\n    generateIssuePreview(){\n      if (!this.selectedBom) return\n      this.issuePreview = this.selectedBom.materials.map(bi => {\n        const m = this.findMainWarehouseMaterialByCode(bi.materialCode)\n        return {\n          materialCode: bi.materialCode, materialName: bi.materialName,\n          requiredQuantity: (bi.requiredQuantity * (parseInt(this.batchQuantity) || 0)),\n          availableQuantity: m ? m.quantity : 0\n        }\n      })\n    },\n    confirmBatchIssueToCart(){\n      if (!this.canConfirmIssue) return\n      const deptName = this.selectedDepartment ? this.selectedDepartment.name : ''\n      this.issuePreview.forEach(item => {\n        if (item.requiredQuantity > 0) {\n          this.cartList.push({\n            id: Date.now() + Math.random(),\n            code: item.materialCode, name: item.materialName,\n            delta: -item.requiredQuantity, type: 'outbound',\n            quantity: item.requiredQuantity, timestamp: Date.now(),\n            meta: {\n              department: this.selectedDepartment ? this.selectedDepartment.code : '',\n              departmentName: deptName, bomId: this.selectedBom ? this.selectedBom.id : null,\n              bomName: this.selectedBom ? this.selectedBom.name : '', outboundType: this.outboundType\n            }\n          })\n        }\n      })\n      this.saveCartList()\n      uiUtils.showSuccess('å·²åŠ å…¥ğŸ›’')\n      this.closeBatchIssueModal(); this.openCart()\n    },\n\n    /* -------- æŠ½å±‰èœå•åŠŸèƒ½ -------- */\n    doSearch(){ uni.navigateTo({ url: '/pages/search/search' }) },\n    goRecords(){ uni.navigateTo({ url: '/pages/records/records' }) },\n\n    /* ========== æ–°å¢ï¼šå®Œæ•´æ‹–æ‹½åˆ é™¤åŠŸèƒ½ ========== */\n    onDragStart(e, item, index){ this._userInteracted = true; this.beginDrag(e, item, index) },\n    beginDragCategory(e, category){\n      const categoryWithType = Object.assign({}, category, { __dragType: 'category' })\n      this.beginDrag(e, categoryWithType)\n    },\n    beginDragMaterial(e, material, index){\n      const materialWithType = Object.assign({}, material, { __dragType: 'material' })\n      this.beginDrag(e, materialWithType, index)\n    },\n    beginDrag(e, item, index){\n      const t = this._firstTouch(e)\n      this.dragX = t.clientX; this.dragY = t.clientY\n      this.dragItem = item; this.dragIndex = index\n      this.isDragging = true; this.isInDeleteZone = false\n      this.dragScrollLock = true // âœ… åŠ ä¸Šæ»šåŠ¨é”å®š\n      // è®¾ç½®æ‹–æ‹½ç›®æ ‡ç±»å‹\n      if (item.__dragType) {\n        this.dragTarget = { type: item.__dragType, id: item.id, payload: item }\n        console.log('è®¾ç½®æ‹–æ‹½ç›®æ ‡:', this.dragTarget)\n      }\n      // æ™ºèƒ½åˆ é™¤åŒºå‡†å¤‡\n      this.prepareDeleteZone(e)\n      // ç­‰åˆ é™¤åŒºè¿›åœºåå†é‡ DOM\n      this.$nextTick(() => {\n        // ç¬¬ä¸€æ¬¡ nextTick ç­‰ v-if æŒ‚è½½\n        this.$nextTick(() => {\n          // ç¬¬äºŒæ¬¡ nextTick ç­‰è¿‡æ¸¡ç±»åç”Ÿæ•ˆ\n          this._measureDeleteZone()\n        })\n      })\n    },\n    onDragMove(e){\n      if (!this.isDragging) return\n      this._lastMoveTs = Date.now() // æ›´æ–°æ—¶é—´æˆ³\n      const t = this._firstTouch(e)\n      this.dragX = t.clientX; this.dragY = t.clientY\n      this._hitTestDeleteZone(t.clientX, t.clientY)\n    },\n    onDragEnd(e){\n      if (!this.isDragging) return\n      if (this.isInDeleteZone && this.dragItem) {\n        if (this.dragTarget && this.dragTarget.type === 'category') this.deleteDraggedCategory()\n        else this.deleteDraggedMaterial()\n        this.vibrateNow(15)\n      }\n      this.teardownDeleteZone()\n      this._resetDrag()\n    },\n    onDragCancel(){ this.teardownDeleteZone(); this._resetDrag() },\n    _resetDrag(){\n      this.isDragging = false; this.dragItem = null; this.dragIndex = -1\n      this.dragTarget = null; this.isInDeleteZone = false\n      this.dragScrollLock = false; this._lastHit = false\n    },\n\n    /* ========== DOM & å‘½ä¸­æ£€æµ‹ ========== */\n    _measureDeleteZone(){\n      const q = uni.createSelectorQuery().in(this)\n      q.select('#deleteZone').boundingClientRect(rect => {\n        if (!rect) {\n          // å…œåº•é‡è¯•ä¸€æ¬¡\n          setTimeout(() => {\n            const q2 = uni.createSelectorQuery().in(this)\n            q2.select('#deleteZone').boundingClientRect(r2 => {\n              this.deleteZoneRect = r2 || null\n            }).exec()\n          }, 16)\n        } else {\n          this.deleteZoneRect = rect\n        }\n      }).exec()\n    },\n    _hitTestDeleteZone(x, y){\n      if (!this.deleteZoneRect) return (this.isInDeleteZone = false)\n      const r = this.deleteZoneRect\n      const hit = x >= r.left && x <= r.right && y >= r.top && y <= r.bottom\n      if (hit && !this._lastHit) this.vibrateNow(10)\n      this._lastHit = !!hit\n      this.isInDeleteZone = !!hit\n    },\n    _firstTouch(e){\n      const t = (e.touches && e.touches[0]) || (e.changedTouches && e.changedTouches[0]) || e\n      return { clientX: t.clientX != null ? t.clientX : t.pageX, clientY: t.clientY != null ? t.clientY : t.pageY }\n    },\n\n    /* ========== å®é™…åˆ é™¤é€»è¾‘ï¼ˆæŒ‰ä½ çš„æ•°æ®ç»“æ„æ”¹ï¼‰ ========== */\n    removeMaterialById(id){\n      if (id == null) return\n      const list = Array.isArray(this.flatMaterials) ? this.flatMaterials : []\n      const idx = list.findIndex(x => x && x.id === id)\n      if (idx === -1) return\n      if (this.selectedCategory) {\n        const g = this.findGroupByTabAndTitle(this.nid, this.selectedCategory.name)\n        if (g && g.materials) {\n          const materialIdx = g.materials.findIndex(x => x && x.id === id)\n          if (materialIdx !== -1) { g.materials.splice(materialIdx, 1) }\n        }\n      }\n    },\n\n    /* ========== æ™ºèƒ½åˆ é™¤åŒºæ–¹æ³• ========== */\n    prepareDeleteZone(e){\n      const t = this._firstTouch(e)\n      const side = (this._winH && t.clientY <= this._winH / 2) ? 'top' : 'bottom'\n      this.zoneSide = side\n      this.zoneStyle = {}\n      this.$nextTick(() => { this.zoneVisible = true })\n    },\n    teardownDeleteZone(){\n      this.zoneVisible = false; this.deleteZoneRect = null\n      setTimeout(() => { /* åŠ¨ç”» 180ms åæ‰§è¡Œæ›´å¤šæ¸…ç† */ }, 200)\n    },\n\n    // å³ä¾§ææ–™åˆ—è¡¨æ»šåŠ¨ï¼šå‘çˆ¶å±‚æŠ¥å‘Šæ»šåŠ¨è¿›åº¦ä¸æ˜¯å¦åœ¨é¡¶éƒ¨ï¼Œå¹¶é©±åŠ¨å¤´éƒ¨éšè—\n    onRightScroll(e){\n      const st = (e && e.detail && typeof e.detail.scrollTop === 'number') ? e.detail.scrollTop : 0\n      this.$emit('scroll-y', st)\n      this.$emit('left-top', st <= 2)\n      this._handleHeadHideProgress(st)\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* å®¹å™¨å’Œé¡µé¢åŸºç¡€æ ·å¼ - ç§»åŠ¨ç«¯é€‚é… */\n.container{ height: 100%; overflow: hidden; will-change: transform; }\n.container--drag-locked{\n  position: fixed; width: 100%; height: 100vh; overflow: hidden; touch-action: none;\n}\n.container--fixed{\n  position: fixed; left: 0; right: 0;\n  top: var(--window-top, 0px);\n  height: calc(100vh - var(--window-top, 0px));\n  z-index: 1;\n  will-change: transform;\n}\n.page{\n  display: flex; flex-direction: column; height: 100%;\n  background: #f6f7fb; width: 100%; max-width: 100vw; overflow: hidden;\n  /* åªå…è®¸æ¨ªå‘æ‰‹åŠ¿å‘å¤–å±‚ï¼ˆç”¨äº swiperï¼‰ï¼›çºµå‘åœ¨å†…éƒ¨æ»šåŠ¨ */\n  touch-action: pan-x;\n}\n/* ç»Ÿä¸€å»æ‰ scroll-view é¡¶éƒ¨å ä½ï¼Œé¿å…å†å‡ºç°é‚£ä¸€æˆªç©ºç™½ */\n.left, .right__list, .right { padding-top: 0 !important; }\n.page--drag-locked{ overflow: hidden; touch-action: none; position: relative; }\n.main{ display: flex; flex-direction: row; flex: 1; height: 100%; overflow: hidden; min-height: 0; }\n\n.left{\n  width: 240rpx; min-width: 120px; max-width: 30vw;\n  background: #fff; border-right: 1px solid #eef0f4; flex-shrink: 0; overflow: hidden;\n}\n.right{\n  flex: 1; padding: 16rpx 20rpx; height: 100%;\n  min-width: 0; overflow: hidden; display: block;\n}\n\n.cat{ position:relative; padding:26rpx 22rpx 26rpx 30rpx }\n.cat--active{ background:#fff5f5 }\n.cat-ind{ position:absolute; left:0; top:0; bottom:0; width:8rpx; background:#ff4d4f; border-radius:0 6rpx 6rpx 0 }\n.cat__txt{ font-size:30rpx; color:#333 }\n\n.right__title{\n  position: sticky; top: 0; z-index: 100; background: #f6f7fb;\n  font-size:34rpx; font-weight:700; padding:8rpx 4rpx 22rpx; color:#333;\n  display:flex; align-items:center; justify-content:space-between; flex-shrink: 0;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.05);\n}\n.right__title--sticky { background: #f6f7fb; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }\n.container--drag-locked .right__title--sticky { box-shadow: none; }\n.container--drag-locked .right { overflow: hidden; }\n\n\n\n@media screen and (max-width: 480px) {\n  .right__title { padding: 6rpx 2rpx 18rpx; font-size: 32rpx; }\n}\n\n.right__list{ box-sizing: border-box; }\n\n.row{ display:flex; flex-direction:row; align-items:center; justify-content:space-between;\n  padding:18rpx 6rpx; border-bottom:1px solid #f0f0f0; margin-bottom:12rpx }\n.row__info{ flex:1; padding-right:100rpx }\n.row__line{ display:flex; flex-direction:row; margin:4rpx 0; align-items:center; position:relative }\n.lbl{ color:#666; font-size:26rpx; width:140rpx; flex-shrink:0 }\n.val{ color:#333; font-size:26rpx; flex:1 }\n.row__ops{ display:flex; flex-direction:column; align-items:center; justify-content:center; gap:12rpx; flex-shrink:0 }\n\n.pill{ width:88rpx; height:52rpx; border-radius:26rpx; display:flex; align-items:center; justify-content:center;\n  font-size:24rpx; color:#fff; box-shadow: 0 4rpx 8rpx rgba(0,0,0,.15), inset 0 1rpx 2rpx rgba(255,255,255,.2);\n  transition:all .3s cubic-bezier(0.4, 0, 0.2, 1); position:relative; overflow:hidden; }\n.pill--green{ background:linear-gradient(135deg, #3bb34a 0%, #2d8f3a 100%) }\n.pill--red{ background:linear-gradient(135deg, #f26363 0%, #e04545 100%) }\n\n/* BOMä¸“ç”¨ææ–™è¡ŒæŒ‰é’® */\n.pill--blue{\n  background:linear-gradient(135deg, #722ed1 0%, #531dab 100%); border-radius:8rpx; border:1rpx solid rgba(255,255,255,.3);\n  box-shadow: 0 4rpx 8rpx rgba(114,46,209,.2), inset 0 1rpx 2rpx rgba(255,255,255,.3);\n}\n.pill--orange{\n  background:linear-gradient(135deg, #fa541c 0%, #d4380d 100%); border-radius:8rpx; border:1rpx solid rgba(255,255,255,.3);\n  box-shadow: 0 4rpx 8rpx rgba(250,84,28,.2), inset 0 1rpx 2rpx rgba(255,255,255,.3);\n}\n.pill:active{ transform:scale(0.96) translateY(1rpx); box-shadow: 0 2rpx 4rpx rgba(0,0,0,.2), inset 0 1rpx 2rpx rgba(255,255,255,.1); }\n.pill--blue:active{ transform:scale(0.94) translateY(2rpx); box-shadow: 0 2rpx 4rpx rgba(114,46,209,.3), inset 0 1rpx 2rpx rgba(255,255,255,.2), inset 0 -1rpx 3rpx rgba(0,0,0,.15); }\n.pill--orange:active{ transform:scale(0.94) translateY(2rpx); box-shadow: 0 2rpx 4rpx rgba(250,84,28,.3), inset 0 1rpx 2rpx rgba(255,255,255,.2), inset 0 -1rpx 3rpx rgba(0,0,0,.15); }\n.pill::before{\n  content:''; position:absolute; top:4rpx; left:8rpx; width:30rpx; height:12rpx;\n  background:linear-gradient(135deg, rgba(255,255,255,.6), rgba(255,255,255,.2)); border-radius:20rpx; pointer-events:none; z-index:2;\n}\n\n.divider{ height:1px; background:#eef0f4; margin:8rpx 0 22rpx }\n\n.fab{ position:fixed; width:96rpx; height:96rpx; border-radius:50%; display:flex; align-items:center; justify-content:center;\n  right:28rpx; bottom:calc(env(safe-area-inset-bottom, 0px) + 160rpx); box-shadow:0 10rpx 26rpx rgba(0,0,0,.16); z-index:100 }\n.fab--cart{ background:#4da3ff }\n.cart{ color:#fff; font-size:42rpx; line-height:42rpx }\n.badge{ position:absolute; right:-6rpx; top:-6rpx; background:#ff4d4f; color:#fff; font-size:22rpx; border-radius:999rpx; padding:4rpx 10rpx }\n\n.mask{ position:fixed; inset:0; background:rgba(0,0,0,.35); z-index:999 }\n.cart-panel{\n  position:fixed; left:0; right:0; bottom:calc(env(safe-area-inset-bottom, 0px) + 80rpx); background:#fff; border-top-left-radius:18rpx; border-top-right-radius:18rpx;\n  max-height:70vh; z-index:1000; display:flex; flex-direction:column\n}\n.cart-title{ font-size:32rpx; font-weight:700; padding:24rpx 24rpx 16rpx; border-bottom:1px solid #eef0f4; text-align:center }\n.cart-list{ flex:1; padding:16rpx 24rpx; overflow-y:auto }\n.cart-item{ display:flex; flex-direction:row; align-items:center; justify-content:space-between; padding:16rpx 0; border-bottom:1px solid #f5f5f5 }\n.cart-item-info{ flex:1; display:flex; flex-direction:row; align-items:center; gap:12rpx; flex-wrap:wrap }\n.ci-name{ font-size:28rpx; color:#333; font-weight:600 }\n.ci-code{ font-size:24rpx; color:#777 }\n.ci-qty{ font-size:26rpx; font-weight:700; margin-top:0 }\n.ci-qty.in{ color:#3bb34a }\n.ci-qty.out{ color:#f26363 }\n.cart-item-action{ flex-shrink:0 }\n.delete-btn{ padding:8rpx 16rpx; background:#ff4d4f; color:#fff; border-radius:8rpx; font-size:24rpx }\n.cart-footer{ padding:16rpx 24rpx 24rpx; border-top:1px solid #eef0f4; background:#fafafa }\n.cart-summary{ text-align:center; margin-bottom:16rpx }\n.summary-text{ font-size:28rpx; color:#666 }\n.cart-actions{ display:flex; flex-direction:row; gap:16rpx }\n.ca-btn{ flex:1; padding:16rpx 0; border-radius:12rpx; font-size:28rpx; text-align:center; font-weight:600 }\n.ca-clear{ background:#f3f4f6; color:#666 }\n.ca-checkout{ background:#3c9cff; color:#fff }\n\n/* å³ä¾§æŠ½å±‰ä¸é®ç½© */\n.drawer-overlay{ position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,.5); z-index:1000 }\n.drawer{\n  position:fixed; top:0; right:-500rpx; width:500rpx; height:100vh; background:#fff; z-index:1001;\n  transition:right .2s ease; box-shadow:-2rpx 0 8rpx rgba(0,0,0,.1); display:flex; flex-direction:column;\n}\n.drawer--dragging{ transition:none }\n.drawer-header{ display:flex; align-items:center; justify-content:center; padding:40rpx 32rpx 32rpx; border-bottom:1rpx solid #f0f0f0; background:#f8f9fa }\n.drawer-title{ font-size:32rpx; font-weight:600; color:#333 }\n.drawer-content{ padding:32rpx 0; flex:1; }\n.drawer-item{ display:flex; align-items:center; padding:32rpx 40rpx; border-bottom:1rpx solid #f5f5f5 }\n.drawer-footer{ padding:24rpx; display:flex; align-items:center; border-top:1rpx solid #f0f0f0; }\n.drawer-icon{ font-size:36rpx; margin-right:24rpx; width:60rpx; text-align:center }\n.drawer-text{ font-size:30rpx; color:#333; font-weight:500 }\n\n/* æ‹–æ‹½é€‰æ‹©ä¸æ‹–åŠ¨ä»£ç† */\n.cat--selected{ background:#e6f7ff; border-left:6rpx solid #1890ff }\n.cat-checkbox{ position:absolute; top:8rpx; right:8rpx; width:32rpx; height:32rpx; background:#1890ff; color:#fff; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:20rpx; font-weight:bold }\n.row--selected{ background:#e6f7ff; border-left:6rpx solid #1890ff }\n.material-checkbox{ width:32rpx; height:32rpx; background:#1890ff; color:#fff; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:20rpx; font-weight:bold; margin-right:16rpx; flex-shrink:0 }\n\n/* è½¦é—´ä»“æ ·å¼ */\n.negative-quantity{ color:#ff4d4f !important; font-weight:600 }\n.quantity-detail{ position:absolute; right:-36rpx; top:50%; transform:translateY(-50%); width:44rpx; height:52rpx; display:flex; align-items:flex-end; justify-content:center; gap:3rpx; padding:0 }\n.qd-bar{ width:8rpx; border-radius:4rpx 4rpx 0 0; box-shadow:0 2rpx 4rpx rgba(0,0,0,.08) }\n.qd-bar--a{ height:18rpx; background:linear-gradient(180deg,#a0f0a8 0%, #3bb34a 100%) }\n.qd-bar--b{ height:26rpx; background:linear-gradient(180deg,#ff9aa0 0%, #ff4d4f 100%) }\n.qd-bar--c{ height:36rpx; background:linear-gradient(180deg,#69c0ff 0%, #1890ff 100%) }\n.qd-bar--d{ height:46rpx; background:linear-gradient(180deg,#5cdbd3 0%, #13c2c2 100%) }\n\n/* è®¡ç®—è¯¦æƒ…æ¨¡æ€æ¡† */\n.calculation-modal{ position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); width:750rpx; max-height:80vh; background:#fff; border-radius:16rpx; z-index:1002; overflow:hidden }\n.calc-section{ margin-bottom:32rpx; padding:24rpx; background:#f9f9f9; border-radius:12rpx }\n.calc-title{ display:block; font-size:28rpx; color:#333; font-weight:600; margin-bottom:16rpx }\n.calc-item{ display:flex; justify-content:space-between; align-items:center; padding:12rpx 0; border-bottom:1rpx solid #f0f0f0 }\n.calc-dept{ font-size:26rpx; color:#666; flex:1 }\n.calc-quantity{ font-size:26rpx; font-weight:600; margin-right:24rpx }\n.calc-quantity.negative{ color:#ff4d4f }\n.calc-date{ font-size:22rpx; color:#999 }\n.calc-total{ display:flex; justify-content:space-between; align-items:center; padding:16rpx 0; margin-top:16rpx; border-top:2rpx solid #e8e8e8 }\n.calc-label{ font-size:28rpx; color:#333; font-weight:600 }\n.calc-value{ font-size:28rpx; font-weight:600; color:#52c41a }\n.calc-value.negative{ color:#ff4d4f }\n.calc-result{ display:flex; justify-content:space-between; align-items:center; padding:24rpx; background:linear-gradient(135deg,#f0f8ff,#e6f7ff); border-radius:12rpx; margin-top:24rpx }\n.result-label{ font-size:32rpx; color:#333; font-weight:600 }\n.result-value{ font-size:36rpx; font-weight:700; color:#52c41a }\n.result-value.negative{ color:#ff4d4f }\n\n/* æ‰¹é‡å‘æ–™æ¨¡æ€æ¡† */\n.batch-issue-modal{ position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); width:800rpx; max-height:85vh; background:#fff; border-radius:16rpx; z-index:1002; overflow:hidden }\n.form-section{ margin-bottom:32rpx }\n.section-title{ display:block; font-size:28rpx; color:#333; font-weight:600; margin-bottom:16rpx }\n.department-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:16rpx }\n.dept-item{ padding:20rpx 16rpx; background:#f9f9f9; border-radius:8rpx; text-align:center; border:2rpx solid transparent; transition:all .3s ease }\n.dept-item--selected{ background:#e6f7ff; border-color:#1890ff }\n.dept-name{ font-size:26rpx; color:#333; font-weight:500 }\n.bom-list{ display:flex; flex-direction:column; gap:12rpx }\n.bom-item{ padding:20rpx; background:#f9f9f9; border-radius:8rpx; border:2rpx solid transparent; transition:all .3s ease }\n.bom-item--selected{ background:#e6f7ff; border-color:#1890ff }\n.bom-name{ display:block; font-size:28rpx; color:#333; font-weight:600; margin-bottom:8rpx }\n.bom-spec{ display:block; font-size:24rpx; color:#666 }\n.issue-preview{ display:flex; flex-direction:column; gap:12rpx; max-height:300rpx; overflow-y:auto }\n.preview-item{ display:flex; justify-content:space-between; align-items:center; padding:16rpx; background:#f9f9f9; border-radius:8rpx }\n.preview-info{ flex:1 }\n.preview-name{ display:block; font-size:26rpx; color:#333; font-weight:600; margin-bottom:4rpx }\n.preview-code{ display:block; font-size:22rpx; color:#666 }\n.preview-quantity{ display:flex; flex-direction:column; align-items:flex-end; gap:4rpx }\n.preview-need{ font-size:24rpx; color:#333; font-weight:500 }\n.preview-available{ font-size:24rpx; color:#52c41a; font-weight:500 }\n.preview-available.insufficient{ color:#ff4d4f }\n.quantity-input{ display:flex; align-items:center; gap:16rpx }\n.quantity-label{ font-size:26rpx; color:#333; font-weight:500 }\n.quantity-field{ flex:1; padding:16rpx; border:2rpx solid #d9d9d9; border-radius:8rpx; font-size:26rpx; background:#fff }\n.quantity-field:focus{ border-color:#1890ff; outline:none }\n\n/* é€šç”¨æ¨¡æ€æ ·å¼ */\n.modal-mask{ position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,.5); z-index:1001 }\n.modal-title{ text-align:center; font-size:32rpx; font-weight:600; padding:32rpx 24rpx 16rpx; border-bottom:1rpx solid #f0f0f0 }\n.modal-content{ padding:24rpx }\n.selector-row{ display:flex; align-items:center; margin-bottom:24rpx }\n.selector-label{ width:160rpx; font-size:28rpx; color:#333; flex-shrink:0 }\n.picker-display{ flex:1; display:flex; align-items:center; justify-content:space-between; padding:16rpx 20rpx; background:#f8f9fa; border-radius:8rpx; border:1rpx solid #e9ecef; font-size:28rpx; color:#333 }\n.picker-arrow{ color:#999; font-size:24rpx }\n.modal-actions{ display:flex; border-top:1rpx solid #f0f0f0 }\n.modal-btn{ flex:1; text-align:center; padding:24rpx 0; font-size:28rpx; font-weight:600 }\n.modal-cancel{ color:#666; border-right:1rpx solid #f0f0f0 }\n.modal-confirm{ color:#1890ff }\n.add-category-modal,.add-material-modal{ position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); width:600rpx; max-height:75vh; overflow:auto; background:#fff; border-radius:16rpx; z-index:1002; will-change:transform }\n.input-row{ display:flex; align-items:center; margin-bottom:24rpx }\n.input-label{ width:160rpx; font-size:28rpx; color:#333; flex-shrink:0 }\n.input-field{ flex:1; padding:16rpx 20rpx; background:#f8f9fa; border-radius:8rpx; border:1rpx solid #e9ecef; font-size:28rpx; color:#333 }\n.btn-disabled{ opacity:.5; pointer-events:none }\n\n/* æ ‡é¢˜æ æŒ‰é’® */\n.title-buttons{ display:flex; align-items:center; gap:16rpx; margin-right:6rpx }\n.batch-issue-btn{\n  width:88rpx; height:52rpx; background:linear-gradient(135deg, #1890ff 0%, #096dd9 100%); border-radius:8rpx;\n  display:flex; align-items:center; justify-content:center; box-shadow: 0 6rpx 12rpx rgba(24,144,255,.25), inset 0 2rpx 4rpx rgba(255,255,255,.3), inset 0 -2rpx 6rpx rgba(0,0,0,.1);\n  transition:all .3s cubic-bezier(0.4, 0, 0.2, 1); position:relative; overflow:hidden; border:2rpx solid rgba(255,255,255,.2);\n}\n.batch-issue-text{ font-size:24rpx; color:#fff; font-weight:600 }\n.batch-issue-btn:active{\n  transform:scale(0.95) translateY(2rpx);\n  box-shadow: 0 3rpx 6rpx rgba(24,144,255,.4), inset 0 1rpx 2rpx rgba(255,255,255,.2), inset 0 -1rpx 4rpx rgba(0,0,0,.15);\n}\n\n/* é€šç”¨èƒ¶å›ŠæŒ‰é’®æ ·å¼ */\n.add-btn, .cat--add{\n  width:88rpx; height:52rpx; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius:26rpx;\n  display:flex; align-items:center; justify-content:center; box-shadow: 0 4rpx 8rpx rgba(102,126,234,.3), inset 0 2rpx 4rpx rgba(255,255,255,.2), inset 0 -2rpx 6rpx rgba(0,0,0,.1);\n  transition:all .3s cubic-bezier(0.4, 0, 0.2, 1); position:relative; overflow:hidden; border:none; text-align:center;\n}\n\n/* æ™ºèƒ½æŒ‰é’®ä¸“ç”¨ - ä¸‰ä¸ªåœ†ç‚¹ */\n.smart-action-btn{ display:flex; align-items:center; justify-content:center; transition:all .3s ease; position:relative; cursor:pointer; padding:8rpx; transform:translateX(-16rpx); }\n.dots-container{ display:flex; flex-direction:column; align-items:center; justify-content:center; gap:6rpx; }\n.cat--add .dots-container{ flex-direction:row; gap:8rpx; }\n.dot{ border-radius:50%; transition:all .3s ease; position:relative; width:10rpx; height:10rpx; animation:breathe-dot 2s ease-in-out infinite; }\n.dot-small:nth-child(1){ background:#1890ff; animation-delay:0s; }\n.dot-large{ background:#52c41a; animation-delay:0.3s; }\n.dot-small:nth-child(3){ background:#fa8c16; animation-delay:0.6s; }\n@keyframes breathe-dot { 0%, 100% { transform:scale(1); opacity:0.9; } 50% { transform:scale(1.3); opacity:1; } }\n.smart-action-btn:active .dot{ animation-play-state:paused; transform:scale(0.8); opacity:0.6; }\n\n.cat--add{ margin:16rpx 0 16rpx 22rpx; align-self:flex-start; display:flex; align-items:center; justify-content:center;\n  width:88rpx; height:52rpx; background:transparent; border-radius:8rpx; transition:all .3s ease; position:relative; cursor:pointer; padding:8rpx; }\n.add-btn::before{\n  content:''; position:absolute; top:4rpx; left:8rpx; width:30rpx; height:12rpx;\n  background:linear-gradient(135deg, rgba(255,255,255,.6), rgba(255,255,255,.2)); border-radius:20rpx; pointer-events:none; z-index:2;\n}\n.add-btn::after{\n  content:''; position:absolute; bottom:-3rpx; left:50%; transform:translateX(-50%); width:70rpx; height:10rpx;\n  background:linear-gradient(90deg, transparent, rgba(102,126,234,.3) 20%, rgba(102,126,234,.3) 80%, transparent); border-radius:50%; pointer-events:none; z-index:-1; filter:blur(2rpx);\n}\n.add-btn:active{ transform:scale(0.96) translateY(1rpx);\n  box-shadow: 0 4rpx 8rpx rgba(102,126,234,.5), inset 0 2rpx 4rpx rgba(255,255,255,.3), inset 0 -2rpx 6rpx rgba(0,0,0,.2);\n}\n\n/* æ‰¹é‡å‡ºåº“ UI */\n.cat--batch-out{\n  background:linear-gradient(135deg, #ff7875 0%, #ff4d4f 100%); border:none; margin-top:16rpx; border-radius:12rpx;\n  box-shadow: 0 6rpx 12rpx rgba(255,77,79,.25), inset 0 2rpx 4rpx rgba(255,255,255,.2), inset 0 -2rpx 6rpx rgba(0,0,0,.1);\n  transition:all .3s cubic-bezier(0.4, 0, 0.2, 1); position:relative; overflow:hidden;\n}\n.cat--batch-out:active{ transform:scale(0.98) translateY(1rpx);\n  box-shadow: 0 4rpx 8rpx rgba(255,77,79,.35), inset 0 1rpx 2rpx rgba(255,255,255,.1);\n}\n.cat--batch-out::before{\n  content:''; position:absolute; top:4rpx; left:8rpx; width:40rpx; height:14rpx;\n  background:linear-gradient(135deg, rgba(255,255,255,.7), rgba(255,255,255,.3)); border-radius:20rpx; pointer-events:none; z-index:2;\n}\n.cat__txt--batch{ color:#fff; font-weight:700; text-shadow:0 1rpx 2rpx rgba(0,0,0,.3); font-size:28rpx; }\n\n/* æ‰¹é‡ä¸‹è½½æŒ‰é’® */\n.cat--download{\n  display:flex; justify-content:center; align-items:center; margin-top:20rpx; padding:16rpx;\n  background: linear-gradient(135deg, #4a90e2, #3a70c2); border-radius: 8rpx;\n  box-shadow: 0 4rpx 8rpx rgba(0,0,0,0.15); position: relative;\n}\n.cat--download:active{ transform: scale(0.98) translateY(1rpx); box-shadow: 0 2rpx 4rpx rgba(0,0,0,0.1); }\n\n/* æ‰¹é‡å‡ºåº“æ¨¡æ€æ¡† */\n.batch-outbound-modal{\n  position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);\n  width:750rpx; max-height:85vh; background:#fff; border-radius:16rpx; z-index:1002; overflow:hidden;\n  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.15);\n}\n.modal-header { position: relative; padding: 24rpx 30rpx; border-bottom: 1rpx solid #f0f0f0; }\n.modal-title { font-size: 32rpx; font-weight: 600; color: #333; text-align: center; }\n.modal-close-btn {\n  position: absolute; top: 16rpx; right: 16rpx; width: 70rpx; height: 70rpx; display: flex; align-items: center; justify-content: center;\n  font-size: 48rpx; color: #666; border-radius: 50%; background: #f5f5f5; transition: all 0.2s ease;\n}\n.modal-close-btn:hover { background: #e0e0e0; color: #333; }\n.batch-selector,.dept-selector{ display:flex; flex-wrap:wrap; gap:16rpx; margin-top:20rpx }\n.batch-item,.dept-item{\n  padding:18rpx 26rpx; background:#f6f7f9; border-radius:12rpx; border:2rpx solid transparent; cursor:pointer; transition:all 0.3s ease;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\n}\n.batch-item--selected,.dept-item--selected{ background:#e6f7ff; border-color:#1890ff; color:#1890ff; box-shadow: 0 2rpx 12rpx rgba(24, 144, 255, 0.15); }\n.batch-item--disabled{ opacity:0.5; background:#f0f0f0; color:#999; cursor:not-allowed }\n.batch-name,.dept-name{ font-size:28rpx; font-weight:500 }\n.batch-status{ font-size:22rpx; color:#999; margin-top:6rpx }\n.outbound-preview{ display:flex; flex-direction:column; gap:16rpx; max-height:300rpx; overflow-y:auto; margin-top:20rpx; padding: 10rpx; }\n.preview-workshop{ font-size:24rpx; color:#52c41a; font-weight:500 }\n.preview-outbound{ font-size:24rpx; color:#fa8c16; font-weight:500 }\n\n/* æ‹–æ‹½é®ç½©å±‚ä¸å½±å­ */\n.drag-mask { position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 1500; background: rgba(0, 0, 0, 0.1); pointer-events: auto; touch-action: none; }\n.drag-ghost { position: absolute; padding: 16rpx 24rpx; background: rgba(255, 255, 255, 0.95); border: 2rpx solid #1890ff; border-radius: 12rpx; box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.2); transform: translate(-50%, -50%); pointer-events: none; z-index: 1501; }\n.ghost-text { font-size: 24rpx; color: #1890ff; font-weight: 500; }\n\n/* åˆ é™¤åŒºå…¬å…±å¤–è§‚ */\n.drag-delete-zone{\n  position: fixed; left: 40rpx; right: 40rpx; height: 120rpx; border-radius: 24rpx;\n  background: #f5f5f5; border: 2rpx dashed #ff5a5a; color: #ff5a5a;\n  display: flex; align-items: center; justify-content: center; z-index: 10000;\n  transition: transform .18s ease, opacity .18s ease; opacity: 0;\n}\n.from-bottom{ bottom: 40rpx; transform: translateY(30rpx); }\n.from-top { top: 40rpx; transform: translateY(-30rpx); }\n.enter{ opacity: 1; transform: translateY(0) !important; }\n.leave{ opacity: 0; }\n.drag-zone-active{ background: #ffefef; border-color: #ff2d2d; transform: translateY(0) scale(1.02) !important; }\n.drag-zone-icon{ font-size: 40rpx; margin-right: 12rpx; }\n.drag-zone-text{ font-size: 28rpx; }\n\n@supports (padding: max(0px)) {\n  .from-bottom{ bottom: calc(40rpx + env(safe-area-inset-bottom)); }\n  .from-top { top: calc(40rpx + env(safe-area-inset-top)); }\n}\n\n/* æ‹–æ‹½ä¸­çš„è¡Œæ ·å¼ */\n.row--dragging { opacity: 0.5; transform: scale(0.95); transition: all 0.2s ease; }\n\n/* ç§»åŠ¨ç«¯å“åº”å¼ */\n@media screen and (max-width: 480px) {\n  .left { width: 200rpx; min-width: 100px; }\n  .right { padding: 12rpx 16rpx; }\n  .cat { padding: 20rpx 16rpx 20rpx 24rpx; }\n  .cat__txt { font-size: 28rpx; }\n  .right__title { font-size: 32rpx; padding: 6rpx 2rpx 18rpx; }\n  .row { padding: 16rpx 4rpx; margin-bottom: 10rpx; }\n  .lbl { font-size: 24rpx; width: 120rpx; }\n  .val { font-size: 24rpx; }\n  .pill { width: 80rpx; height: 48rpx; font-size: 22rpx; }\n}\n@media screen and (max-width: 375px) {\n  .left { width: 180rpx; min-width: 90px; }\n  .cat { padding: 18rpx 12rpx 18rpx 20rpx; }\n  .cat__txt { font-size: 26rpx; }\n  .right { padding: 10rpx 12rpx; }\n  .right__title { font-size: 30rpx; }\n  .lbl { width: 100rpx; font-size: 22rpx; }\n  .val { font-size: 22rpx; }\n  .pill { width: 72rpx; height: 44rpx; font-size: 20rpx; }\n}\n@media screen and (orientation: landscape) and (max-height: 500px) {\n  .container { padding-top: 20px; padding-bottom: 10px; }\n  .page { height: 100%; }\n  .cat { padding: 16rpx 20rpx 16rpx 24rpx; }\n  .row { padding: 14rpx 4rpx; margin-bottom: 8rpx; }\n}\n@media screen and (max-width: 320px) {\n  .left { width: 160rpx; min-width: 80px; }\n  .right { padding: 8rpx 10rpx; }\n  .cat__txt { font-size: 24rpx; }\n  .right__title { font-size: 28rpx; }\n  .pill { width: 68rpx; height: 40rpx; font-size: 18rpx; }\n}\n.page--drag-locked { overscroll-behavior: contain; }\n.container--drag-locked { overscroll-behavior: none; }\n.container, .page { overscroll-behavior: contain; }\n.right__list, .left { -webkit-overflow-scrolling: touch; overscroll-behavior: contain; touch-action: pan-y; }\n.drag-mask { touch-action: none; }\n.cat, .row { -webkit-touch-callout: none; user-select: none; }\n/* é¢„è§ˆä¸è¶³æ ‡çº¢ */\n.preview-workshop.insufficient { color:#ff4d4f; font-weight:700; }\n</style>\n","import mod from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./material-page.vue?vue&type=style&index=0&id=421059c6&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./material-page.vue?vue&type=style&index=0&id=421059c6&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1763277928731\n      var cssReload = require(\"D:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}