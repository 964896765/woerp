<view class="page data-v-a037f574"><view class="hd data-v-a037f574">出入库结算</view><scroll-view class="list data-v-a037f574" scroll-y="{{true}}" enable-flex="{{true}}"><block wx:for="{{$root.l0}}" wx:for-item="it" wx:for-index="__i0__" wx:key="id"><view class="item data-v-a037f574"><view class="title data-v-a037f574">{{it.$orig.materialCode+" - "+it.$orig.materialName}}</view><view class="meta data-v-a037f574"><text class="{{['tag','data-v-a037f574',it.$orig.type]}}">{{it.$orig.type==='inbound'?'入库':'出库'}}</text><text class="data-v-a037f574">{{"数量："+it.$orig.quantity}}</text><text class="data-v-a037f574">{{it.m0}}</text></view></view></block><block wx:if="{{!$root.g0}}"><view class="empty data-v-a037f574"><u-empty vue-id="4c9d2480-1" mode="list" text="清单为空" class="data-v-a037f574" bind:__l="__l"></u-empty></view></block></scroll-view><view class="section-title data-v-a037f574">选择部门</view><scroll-view class="h-scroll chips data-v-a037f574" scroll-x="{{true}}" enable-flex="{{true}}"><block wx:for="{{departments}}" wx:for-item="dept" wx:for-index="__i1__" wx:key="*this"><label class="{{['chip','data-v-a037f574',(dept===selectedDept)?'active':'']}}"><radio value="{{dept}}" checked="{{dept===selectedDept}}" data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" data-event-params="{{({dept})}}" bindtap="__e" class="data-v-a037f574"></radio>{{''+dept+''}}</label></block></scroll-view><view class="section-title data-v-a037f574">出入库类别</view><scroll-view class="h-scroll chips data-v-a037f574" scroll-x="{{true}}" enable-flex="{{true}}"><block wx:for="{{ioTypes}}" wx:for-item="opt" wx:for-index="__i2__" wx:key="value"><label class="{{['chip','data-v-a037f574',(opt.value===selectedIo)?'active':'']}}"><radio value="{{opt.value}}" checked="{{opt.value===selectedIo}}" data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" data-event-params="{{({opt})}}" bindtap="__e" class="data-v-a037f574"></radio>{{''+opt.label+''}}</label></block></scroll-view><view class="section-title data-v-a037f574">签字确认</view><view class="sign-wrap data-v-a037f574"><canvas class="sign-canvas data-v-a037f574" style="{{'width:'+(canvasW+'px')+';'+('height:'+(canvasH+'px')+';')}}" id="signCanvas" type="2d" data-event-opts="{{[['touchstart',[['onStart',['$event']]]],['touchmove',[['onMove',['$event']]]],['touchend',[['onEnd',['$event']]]]]}}" bindtouchstart="__e" bindtouchmove="__e" bindtouchend="__e"></canvas><block wx:if="{{!hasStroke}}"><view class="sign-tips data-v-a037f574">请在上方区域签名</view></block><block wx:if="{{signConfirmed}}"><view class="sign-status data-v-a037f574">✓ 签名已确认</view></block></view><view class="footer data-v-a037f574"><view class="btn-row data-v-a037f574"><view data-event-opts="{{[['tap',[['cancelCheckout',['$event']]]]]}}" class="action-btn btn-cancel data-v-a037f574" bindtap="__e">取消</view><view data-event-opts="{{[['tap',[['clearSign',['$event']]]]]}}" class="action-btn btn-clear data-v-a037f574" bindtap="__e">清除签名</view><view data-event-opts="{{[['tap',[['confirmSign',['$event']]]]]}}" class="{{['action-btn','btn-confirm','data-v-a037f574',!hasStroke?'btn-disabled':'']}}" bindtap="__e">确认签名</view><view data-event-opts="{{[['tap',[['confirmSettle',['$event']]]]]}}" class="{{['action-btn','btn-settle','data-v-a037f574',!signConfirmed?'btn-disabled':'']}}" bindtap="__e">确认结算</view></view></view></view>