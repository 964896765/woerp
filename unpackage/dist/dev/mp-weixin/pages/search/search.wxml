<view data-event-opts="{{[['touchstart',[['onAxisStart',['$event']]]],['touchmove',[['onAxisMove',['$event']]]],['touchend',[['onAxisEnd',['$event']]]],['touchcancel',[['onAxisEnd',['$event']]]]]}}" class="search-page data-v-4cedc0c6" bindtouchstart="__e" bindtouchmove="__e" bindtouchend="__e" bindtouchcancel="__e"><view class="search-head data-v-4cedc0c6"><text data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-btn data-v-4cedc0c6" bindtap="__e">←</text><view class="search-input data-v-4cedc0c6"><text class="search-icon data-v-4cedc0c6">🔍</text><input class="ipt data-v-4cedc0c6" type="text" placeholder="{{placeholder}}" confirm-type="search" data-event-opts="{{[['confirm',[['doSearch',['$event']]]],['input',[['__set_model',['','kw','$event',[]]],['onInput',['$event']]]]]}}" value="{{kw}}" bindconfirm="__e" bindinput="__e"/><block wx:if="{{kw}}"><text data-event-opts="{{[['tap',[['clearKw',['$event']]]]]}}" class="clear-icon data-v-4cedc0c6" bindtap="__e">×</text></block></view><text data-event-opts="{{[['tap',[['doSearch',['$event']]]]]}}" class="btn data-v-4cedc0c6" bindtap="__e">搜索</text></view><scroll-view class="tabbar data-v-4cedc0c6" scroll-x="{{true}}" show-scrollbar="{{false}}" scroll-into-view="{{scrollInto}}" enable-flex="{{true}}"><block wx:for="{{tabList}}" wx:for-item="tab" wx:for-index="i" wx:key="id"><view class="tab data-v-4cedc0c6" id="{{'tab-'+i}}" data-event-opts="{{[['tap',[['switchTab',[i]]]]]}}" bindtap="__e"><text class="{{['data-v-4cedc0c6','tab-text',i===tabIndex?'active':'']}}">{{tab.name}}</text></view></block></scroll-view><swiper class="swiper data-v-4cedc0c6" current="{{tabIndex}}" duration="{{300}}" disable-touch="{{swiperDisable}}" data-event-opts="{{[['change',[['onSwiperChange',['$event']]]]]}}" bindchange="__e"><swiper-item class="data-v-4cedc0c6"><scroll-view class="search-scroll data-v-4cedc0c6" style="{{'padding-bottom:'+(bottomPadRpx)+';'+('height:'+('100%')+';')}}" scroll-y="{{true}}"><block wx:if="{{isSearching}}"><view class="search-loading data-v-4cedc0c6"><text class="loading-icon data-v-4cedc0c6">⏳</text><text class="loading-text data-v-4cedc0c6">正在搜索中...</text></view></block><block wx:if="{{kwSearched}}"><view class="block data-v-4cedc0c6"><view class="block-title data-v-4cedc0c6"><text class="data-v-4cedc0c6">搜索结果</text><block wx:if="{{$root.g0}}"><text class="result-count data-v-4cedc0c6">{{"("+$root.g1+"个结果)"}}</text></block></view><block wx:if="{{$root.g2}}"><view class="result-list data-v-4cedc0c6"><block wx:for="{{results}}" wx:for-item="m" wx:for-index="__i0__" wx:key="id"><view class="res-row data-v-4cedc0c6"><text class="list-icon data-v-4cedc0c6">📋</text><view class="material-info data-v-4cedc0c6"><text class="name data-v-4cedc0c6">{{m.code+" - "+m.name}}</text><text class="detail data-v-4cedc0c6">{{"库存: "+m.stock+m.unit+" | "+m.category}}</text></view><view class="ops data-v-4cedc0c6"><view data-event-opts="{{[['tap',[['chooseTypeAndQty',['$0','inbound'],[[['results','id',m.id]]]]]]]}}" class="op-btn op-btn-add data-v-4cedc0c6" bindtap="__e">+</view><view data-event-opts="{{[['tap',[['chooseTypeAndQty',['$0','outbound'],[[['results','id',m.id]]]]]]]}}" class="op-btn op-btn-minus data-v-4cedc0c6" bindtap="__e">-</view></view></view></block></view></block><block wx:else><view class="empty data-v-4cedc0c6"><text class="empty-icon data-v-4cedc0c6">🔍</text><text class="t data-v-4cedc0c6">没有找到相关材料</text><text class="empty-tip data-v-4cedc0c6">尝试使用其他关键词搜索</text></view></block></view></block><view class="block data-v-4cedc0c6"><view class="block-title data-v-4cedc0c6">热门搜索</view><view class="chips data-v-4cedc0c6"><block wx:for="{{hotKeys}}" wx:for-item="h" wx:for-index="i"><view data-event-opts="{{[['tap',[['pickHot',['$0'],[[['hotKeys','`hot-${i}`','hot-'+i]]]]]]]}}" class="chip data-v-4cedc0c6" bindtap="__e">{{h}}</view></block></view></view></scroll-view></swiper-item><swiper-item class="data-v-4cedc0c6"><scroll-view class="search-scroll data-v-4cedc0c6" style="{{'padding-bottom:'+(bottomPadRpx)+';'+('height:'+('100%')+';')}}" scroll-y="{{true}}"><view class="block data-v-4cedc0c6"><view class="block-title history-title data-v-4cedc0c6"><text class="data-v-4cedc0c6">搜索历史</text><block wx:if="{{$root.g3}}"><text data-event-opts="{{[['tap',[['clearHistory',['$event']]]]]}}" class="clear-all data-v-4cedc0c6" bindtap="__e">清空</text></block></view><block wx:if="{{$root.g4}}"><view class="history-list data-v-4cedc0c6"><block wx:for="{{history}}" wx:for-item="h" wx:for-index="i" wx:key="i"><view class="his-row data-v-4cedc0c6"><view data-event-opts="{{[['tap',[['pickHistory',['$0'],[[['history','',i]]]]]]]}}" class="his-left data-v-4cedc0c6" bindtap="__e"><text class="clock-icon data-v-4cedc0c6">🕐</text><text class="his-text data-v-4cedc0c6">{{h}}</text></view><view data-event-opts="{{[['tap',[['removeHistory',[i]]]]]}}" class="del data-v-4cedc0c6" catchtap="__e"><text class="del-icon data-v-4cedc0c6">×</text></view></view></block></view></block><block wx:else><view class="empty-small data-v-4cedc0c6">暂无历史</view></block></view></scroll-view></swiper-item></swiper><block wx:if="{{$root.g5>0}}"><view data-event-opts="{{[['tap',[['goToCheckout',['$event']]]]]}}" class="cart-fab data-v-4cedc0c6" bindtap="__e"><text class="cart-icon data-v-4cedc0c6">🛒</text><view class="cart-badge data-v-4cedc0c6">{{$root.g6}}</view></view></block><custom-keyboard vue-id="50cad900-1" show="{{showQtyPopup}}" materialInfo="{{currentMaterial}}" operationType="{{currentType}}" value="{{qtyStr}}" data-event-opts="{{[['^updateShow',[['__set_sync',['$0','showQtyPopup','$event'],['']]]],['^confirm',[['confirmQuantity']]],['^cancel',[['cancelQuantity']]],['^input',[['__set_model',['','qtyStr','$event',[]]]]]]}}" bind:updateShow="__e" bind:confirm="__e" bind:cancel="__e" bind:input="__e" class="data-v-4cedc0c6" bind:__l="__l"></custom-keyboard></view>